<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Consultas sencillas - Bases de datos</title>
  <link rel="stylesheet" href="../css/common.css">
  <link rel="stylesheet" href="../css/06sql.css">
  <link rel="icon" href="../images/favicon.png">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
</head>

<body class="page">
  <header class="header">
    <div class="container">
      <div class="header__inner">
        <a href="../index.html" class="header__logo">
          <img src="../images/bd.png" alt="Logo Bases de Datos" class="header__logo-img">
          <span class="header__title">Bases de Datos</span>
        </a>
      </div>
    </div>
  </header>
  <nav class="nav">
    <div class="container">
      <ul class="nav__list">
        <li class="nav__item"><a href="../index.html" class="nav__link">Inicio</a></li>
        <li class="nav__item"><a href="01intro-new.html" class="nav__link">1. Sistemas de Almacenamiento</a></li>
        <li class="nav__item"><a href="02er.html" class="nav__link">2. Modelo E/R</a></li>
        <li class="nav__item"><a href="03mr.html" class="nav__link">3. Modelo Relacional</a></li>
        <li class="nav__item"><a href="04mr-eer.html" class="nav__link">4. Transformación</a></li>
        <li class="nav__item"><a href="05ddl.html" class="nav__link">5. DDL y DML</a></li>
        <li class="nav__item"><a href="06sql.html" class="nav__link nav__link--active">6. Consultas SQL</a></li>
        <li class="nav__item"><a href="07sql-group.html" class="nav__link">7. Agregaciones</a></li>
        <li class="nav__item"><a href="08sql-subquerys.html" class="nav__link">8. Subconsultas</a></li>
        <li class="nav__item"><a href="09dcl-tcl.html" class="nav__link">9. DCL y TCL</a></li>
        <li class="nav__item"><a href="10plsql.html" class="nav__link">10. PL/SQL</a></li>
        <li class="nav__item"><a href="11triggers.html" class="nav__link">11. Triggers</a></li>
        <li class="nav__item"><a href="12nosql.html" class="nav__link">12. NoSQL</a></li>
        <li class="nav__item"><a href="13mongodb.html" class="nav__link">13. MongoDB</a></li>
      </ul>
    </div>
  </nav>
  <main class="main">
    <div class="container">
      <article class="article">
        <div class="article__content">




          <nav class="md-tags">




            <a href="tags.html#tag:ra3" class="md-tag">RA3</a>





            <a href="tags.html#tag:sql" class="md-tag">SQL</a>





            <a href="tags.html#tag:sql---dml" class="md-tag">SQL - DML</a>


          </nav>



          <h1 id="consultas-sencillas">Consultas sencillas<a class="headerlink" href="06sql.html#consultas-sencillas"
              title="Permanent link">&para;</a></h1>
          <h2 id="propuesta-didactica">Propuesta didáctica<a class="headerlink" href="06sql.html#propuesta-didactica"
              title="Permanent link">&para;</a></h2>
          <p>En esta UT vamos a comenzar a trabajar el RA3: <strong>Consulta la información almacenada en una base de
              datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos</strong>.</p>
          <h3 id="criterios-de-evaluacion">Criterios de evaluación<a class="headerlink"
              href="06sql.html#criterios-de-evaluacion" title="Permanent link">&para;</a></h3>
          <ul>
            <li><strong><abbr
                  title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr></strong>:
              Se han identificado las herramientas y sentencias para realizar consultas. </li>
            <li><strong><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></strong>: Se han
              realizado consultas simples sobre una tabla. </li>
            <li><strong><abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr></strong>:
              Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas. </li>
            <li><strong><abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr></strong>:
              Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.</li>
          </ul>
          <h3 id="contenidos">Contenidos<a class="headerlink" href="06sql.html#contenidos"
              title="Permanent link">&para;</a></h3>
          <p>Realización de consultas:</p>
          <ul>
            <li>Proyección, selección y ordenación de registros.</li>
            <li>Operadores. Operadores de comparación. Operadores lógicos.</li>
            <li>Composiciones internas.</li>
            <li>Composiciones externas.</li>
          </ul>
          <div class="admonition question">
            <p class="admonition-title">Cuestionario inicial</p>
            <ol>
              <li>¿Qué diferencia existe entre una proyección y una selección?</li>
              <li>¿Y entre un producto cartesiano y un <em>join</em>?</li>
              <li>¿Qué es una cláusula?</li>
              <li>A la hora de recuperar los campos en una consulta, ¿cuándo usaremos <code>*</code>?</li>
              <li>¿Qué cláusula utilizaremos para eliminar los elementos duplicados?</li>
              <li>¿Y cómo renombramos el nombre de una columna en el resultado de una consulta?</li>
              <li>¿Qué es la sentencia <code>DISTINCT</code> y cómo se utiliza?</li>
              <li>¿Podemos crear variables en un campo de una consulta para utilizarlas dentro de la misma consulta?
              </li>
              <li>¿Con qué función podemos obtener el total de elementos de una tabla?</li>
              <li>¿Qué función hay que emplear para calcular la fecha exacta dentro de 3 meses?</li>
              <li>¿Qué función hay que emplear para redondear hacia debajo o hacia arriba?</li>
              <li>¿Cual es la ordenación por defecto con la sentencia <code>ORDER BY</code> y cómo se cambia?</li>
              <li>¿Qué tipos de combinaciones podemos hacer entre tablas?</li>
              <li>¿Qué diferencia hay entre un <code>inner join</code> y un <code>left join</code>, y cómo afecta al
                resultado de la consulta?</li>
              <li>¿Podemos combinar una tabla consigo misma?</li>
              <li>¿Para qué se emplean los alias en un <em>join</em>?</li>
              <li>¿Cómo se recuperan registros comunes a dos tablas?</li>
              <li>¿Qué operadores de conjuntos conoces?</li>
            </ol>
          </div>
          <!--
Añadir preguntas de join
-->

          <h3 id="programacion-de-aula-11h">Programación de Aula (11h)<a class="headerlink"
              href="06sql.html#programacion-de-aula-11h" title="Permanent link">&para;</a></h3>
          <p>Esta unidad es la sexta, siendo la primera del bloque de consultas, impartiéndose al principio de la
            segunda evaluación, a principios de diciembre, con una duración estimada de 11 sesiones lectivas:</p>
          <table>
            <thead>
              <tr>
                <th>Sesión</th>
                <th>Contenidos</th>
                <th>Actividades</th>
                <th>Criterios trabajados</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>1</td>
                <td><a href="06sql.html#algebra-relacional">Álgebra relacional</a></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>2</td>
                <td><a href="06sql.html#consultas-sql">SQL</a></td>
                <td><a href="06sql.html#AC601">AC601</a></td>
                <td><abbr
                    title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
                  <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></td>
              </tr>
              <tr>
                <td>3</td>
                <td><a href="06sql.html#funciones-agregadas">Funciones agregadas</a> y de <a
                    href="06sql.html#cadenas">cadenas</a></td>
                <td><a href="06sql.html#AC602">AC602</a></td>
                <td><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></td>
              </tr>
              <tr>
                <td>4</td>
                <td><a href="06sql.html#fecha-hora">Funciones de fecha</a> y <a
                    href="06sql.html#ordenando-y-limitando">ordenando</a></td>
                <td><a href="06sql.html#AC603">AC603</a></td>
                <td><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></td>
              </tr>
              <tr>
                <td>5</td>
                <td><a href="06sql.html#seleccion">Filtrando</a></td>
                <td><a href="06sql.html#AC606">AC606</a></td>
                <td><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></td>
              </tr>
              <tr>
                <td>6</td>
                <td>Interpretando consultas</td>
                <td><a href="06sql.html#AC607">AC607</a></td>
                <td><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr></td>
              </tr>
              <tr>
                <td>7</td>
                <td><a href="06sql.html#uniendo-tablas">Uniendo tablas</a> con <a
                    href="06sql.html#composicion-interna">composición interna</a></td>
                <td><a href="06sql.html#AC610">AC610</a></td>
                <td><abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>
                </td>
              </tr>
              <tr>
                <td>8</td>
                <td><a href="06sql.html#composicion-externa">Composición externa</a></td>
                <td><a href="06sql.html#AC611">AC611</a></td>
                <td><abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                </td>
              </tr>
              <tr>
                <td>9</td>
                <td>Supuesto <em>retail</em></td>
                <td><a href="06sql.html#PR614">PR614</a></td>
                <td><abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
                  <abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                </td>
              </tr>
              <tr>
                <td>10</td>
                <td>Resolución del supuesto</td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>11</td>
                <td>Presentación del reto - consultas</td>
                <td><a href="06sql.html#PY615">PY615</a></td>
                <td><abbr
                    title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
                  <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
                  <abbr
                    title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                </td>
              </tr>
            </tbody>
          </table>
          <!--
JJS - 18h
Herramientas gráficas proporcionadas por el sistema gestor para la realización de consultas.
Lenguaje de manipulación de datos (DML).
La sentencia SELECT.
Selección de columnas y selección por fila.

Condiciones WHERE.
Operadores aritméticos.
Operadores de comparación.
Operadores lógicos.
Precedencia.
Funciones de comparación de cadenas de caracteres (LIKE, NOT LIKE).

Operador IS (NULL y NOT NULL).
Operador IN.
Operador BETWEEN.
Selección y ordenación de registros.
Cláusula ORDER BY.
Cláusula LIMIT.
-->

          <h2 id="algebra-relacional">Algebra Relacional<a class="headerlink" href="06sql.html#algebra-relacional"
              title="Permanent link">&para;</a></h2>
          <p>El álgebra relacional es un lenguaje formal utilizado para realizar consultas y operaciones sobre bases de
            datos relacionales. Fue propuesto por <em>Edgar F. Codd</em> en 1970 como parte de su trabajo en la teoría
            de bases de datos relacionales. En lugar de ser un lenguaje de programación como SQL, es un conjunto de
            operaciones matemáticas que permiten manipular conjuntos de datos (relaciones o tablas) de una manera lógica
            y estructurada.</p>
          <h3 id="operaciones">Operaciones<a class="headerlink" href="06sql.html#operaciones"
              title="Permanent link">&para;</a></h3>
          <p>Las operaciones que podemos realizar son:</p>
          <table>
            <thead>
              <tr>
                <th>Operación</th>
                <th>Notación</th>
                <th>Descripción</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><strong>Selección</strong></td>
                <td><strong>σ</strong><sub>condición</sub>(Relación)</td>
                <td>Selecciona las tuplas que cumplen una condición específica.</td>
              </tr>
              <tr>
                <td><strong>Proyección</strong></td>
                <td><strong>π</strong><sub>atributos</sub>(Relación)</td>
                <td>Devuelve una nueva relación con solo las columnas seleccionadas.</td>
              </tr>
              <tr>
                <td><strong>Unión</strong></td>
                <td>Relación1 <strong>∪</strong> Relación2</td>
                <td>Combina las tuplas de dos relaciones con el mismo esquema.</td>
              </tr>
              <tr>
                <td><strong>Intersección</strong></td>
                <td>Relación1 <strong>∩</strong> Relación2</td>
                <td>Devuelve las tuplas que están en ambas relaciones.</td>
              </tr>
              <tr>
                <td><strong>Diferencia</strong></td>
                <td>Relación1 <strong>−</strong> Relación2</td>
                <td>Devuelve las tuplas que están en la primera relación pero no en la segunda.</td>
              </tr>
              <tr>
                <td><strong>Producto cartesiano</strong></td>
                <td>Relación1 <strong>×</strong> Relación2</td>
                <td>Combina cada tupla de la primera relación con cada tupla de la segunda.</td>
              </tr>
              <tr>
                <td><strong>Renombrar</strong></td>
                <td><strong>ρ</strong><sub>nuevoNombre</sub>(Relación)</td>
                <td>Cambia el nombre de una relación o de sus atributos.</td>
              </tr>
              <tr>
                <td><strong>Join natural</strong></td>
                <td>Relación1 <strong>⨝</strong> Relación2</td>
                <td>Une dos relaciones en función de un atributo común de forma implícita.</td>
              </tr>
              <tr>
                <td><strong>Join equi</strong></td>
                <td>Relación1 <strong>⨝</strong><sub>condición</sub> Relación2</td>
                <td>Une dos relaciones en función de una condición, normalmente una igualdad.</td>
              </tr>
            </tbody>
          </table>
          <p>Supongamos que tenemos el siguiente esquema relacional:</p>
          <p>Y las siguientes tablas con datos:</p>
          <div class="grid cards">
            <ul>
              <li>
                <p><code>PRODUCTO</code></p>
                <table>
                  <thead>
                    <tr>
                      <th><ins>id</ins></th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id<code>*</code></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Tostadora</td>
                      <td>50</td>
                      <td>3</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p><code>CATEGORIA</code></p>
                <table>
                  <thead>
                    <tr>
                      <th><ins>id</ins></th>
                      <th>nombre</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Electrónica</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <div class="grid cards">
            <ul>
              <li>
                <p><code>PRODUCTO_IMPORTACION</code></p>
                <table>
                  <thead>
                    <tr>
                      <th><ins>id</ins></th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id<code>*</code></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>6</td>
                      <td>Monitor</td>
                      <td>300</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td>Teclado</td>
                      <td>20</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p><code>PRODUCTO_LUJO</code> (productos con precio mayor a 500)</p>
                <table>
                  <thead>
                    <tr>
                      <th><ins>id</ins></th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id<code>*</code></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <p>Veamos el resultado de realizar algunas operaciones:</p>
          <div class="grid cards">
            <ul>
              <li>
                <p>Selección <strong>σ</strong></p>
                <hr />
                <p><code>σ<sub>precio &gt; 100</sub>(PRODUCTO)</code></p>
                <p>Selecciona los productos con un precio mayor a 100.</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p>Proyección <strong>π</strong></p>
                <hr />
                <p><code>π<sub>nombre, precio</sub>(PRODUCTO)</code></p>
                <p>Muestra únicamente los nombres y precios de los productos.</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>Televisor</td>
                      <td>500</td>
                    </tr>
                    <tr>
                      <td>Laptop</td>
                      <td>1200</td>
                    </tr>
                    <tr>
                      <td>Smartphone</td>
                      <td>800</td>
                    </tr>
                    <tr>
                      <td>Lavadora</td>
                      <td>400</td>
                    </tr>
                    <tr>
                      <td>Tostadora</td>
                      <td>50</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <div class="grid cards">
            <ul>
              <li>
                <p>Unión <strong>∪</strong></p>
                <hr />
                <p><code>PRODUCTO ∪ PRODUCTO_IMPORTACION</code> </p>
                <p>Combina dos tablas de productos. Es necesario que ambas tablas compartan el mismo esquema (cantidad
                  de columnas y dominios).</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Tostadora</td>
                      <td>50</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>6</td>
                      <td>Monitor</td>
                      <td>300</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>7</td>
                      <td>Teclado</td>
                      <td>20</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p>Intersección <strong>∩</strong></p>
                <hr />
                <p><code>PRODUCTO ∩ PRODUCTO_LUJO</code> </p>
                <p>Muestra los productos que están tanto en <strong>PRODUCTO</strong> como en
                  <strong>PRODUCTO_LUJO</strong> </p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <div class="grid cards">
            <ul>
              <li>
                <p>Diferencia <strong>−</strong></p>
                <hr />
                <p><code>PRODUCTO − PRODUCTO_LUJO</code></p>
                <p>Devuelve los productos que están en <strong>PRODUCTO</strong> pero no en
                  <strong>PRODUCTO_LUJO</strong>.</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Tostadora</td>
                      <td>50</td>
                      <td>3</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p>Producto cartesiano <strong>×</strong></p>
                <hr />
                <p><code>PRODUCTO × CATEGORIA</code> </p>
                <p>Combina cada producto con cada categoría (mostramos solo algunas combinaciones por espacio):</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                      <th>nombre_categoria</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                      <td>Electrónica</td>
                    </tr>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>1</td>
                      <td>Electrónica</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>...</td>
                      <td>...</td>
                      <td>...</td>
                      <td>...</td>
                      <td>...</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <div class="grid cards">
            <ul>
              <li>
                <p><em>Join natural </em><em>⨝</em>*</p>
                <hr />
                <p><code>PRODUCTO ⨝ CATEGORIA</code> </p>
                <p>Combina las tablas de <strong>PRODUCTO</strong> y <strong>CATEGORIA</strong> basándose en los
                  atributos que tengan comunes, en este caso, <code>categoria_id</code>.</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                      <th>nombre_categoria</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                      <td>Electrónica</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Tostadora</td>
                      <td>50</td>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                  </tbody>
                </table>
              </li>
              <li>
                <p>Join equi <strong>⨝<sub>expresión</sub></strong></p>
                <hr />
                <p><code>PRODUCTO ⨝<sub>PRODUCTO.categoria_id = CATEGORIA.id</sub> CATEGORIA</code> </p>
                <p>Une las tablas <strong>PRODUCTO</strong> y <strong>CATEGORIA</strong> basándose en la condición de
                  igualdad entre <code>PRODUCTO.categoria_id</code> y <code>CATEGORIA.id</code>. En este caso, es igual
                  al <em>join natural</em>:</p>
                <table>
                  <thead>
                    <tr>
                      <th>id</th>
                      <th>nombre</th>
                      <th>precio</th>
                      <th>categoria_id</th>
                      <th>nombre_categoria</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>1</td>
                      <td>Televisor</td>
                      <td>500</td>
                      <td>1</td>
                      <td>Electrónica</td>
                    </tr>
                    <tr>
                      <td>2</td>
                      <td>Laptop</td>
                      <td>1200</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>3</td>
                      <td>Smartphone</td>
                      <td>800</td>
                      <td>2</td>
                      <td>Informática</td>
                    </tr>
                    <tr>
                      <td>4</td>
                      <td>Lavadora</td>
                      <td>400</td>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                    <tr>
                      <td>5</td>
                      <td>Tostadora</td>
                      <td>50</td>
                      <td>3</td>
                      <td>Electrodomésticos</td>
                    </tr>
                  </tbody>
                </table>
              </li>
            </ul>
          </div>
          <p>Una vez vistas las operaciones, lo más normal es combinarlas para extraer información de las tablas. A
            continuación se muestran algunos ejemplos:</p>
          <ol>
            <li>
              <p>Seleccionar todos los productos de la tabla PRODUCTO</p>
              <p><code>π<sub>id, nombre, precio, categoria_id</sub>(PRODUCTO)</code></p>
            </li>
            <li>
              <p>Seleccionar los productos cuyo precio sea menor o igual a 500</p>
              <p><code>𝜎<sub>precio ≤ 500</sub>(PRODUCTO)</code></p>
            </li>
            <li>
              <p>Nombre y precio de los productos cuyo precio sea inferior a 300.</p>
              <p><code>π<sub>nombre, precio</sub>(𝜎<sub>precio &gt; 300</sub>(PRODUCTO))</code></p>
            </li>
            <li>
              <p>Nombre de los productos de la categoría <code>Electrodomésticos</code> (primero el <em>join</em> y
                luego selección)</p>
              <p><code>π<sub>nombre</sub>(PRODUCTO ⨝<sub>PRODUCTO.categoria_id = CATEGORIA.id ∧
CATEGORIA.nombre = "Electrodomésticos</sub> CATEGORIA)</code></p>
            </li>
            <li>
              <p>Nombre de los productos de la categoría <code>Electrodomésticos</code> (primero la selección y luego el
                <em>join</em>)</p>
              <p>
                <code>π<sub>nombre</sub>(PRODUCTO ⨝<sub>PRODUCTO.categoria_id = CATEGORIA.id</sub> (𝜎<sub>nombre = "Electrodomésticos</sub>(CATEGORIA))</code>
              </p>
            </li>
          </ol>
          <p>Estas operaciones forman la base teórica de cómo las bases de datos relacionales manipulan los datos y son
            fundamentales para comprender el funcionamiento de lenguajes como SQL.</p>
          <h2 id="consultas-sql">Consultas SQL<a class="headerlink" href="06sql.html#consultas-sql"
              title="Permanent link">&para;</a></h2>
          <div class="admonition info">
            <p class="admonition-title">Preparando los datos</p>
            <p>La base de datos que vamos a utilizar a lo largo de los apuntes gestiona los datos de una empresa, sus
              departamentos y empleados, así como las habilidades de éstos.</p>
            <p>
            <figure style="align: center;">
              <img src="../images/06bd-empresa.png" width="882" title="Modelo físico de la BD Empresa">
              <figcaption>Modelo físico de la BD Empresa</figcaption>
            </figure>
            </p>
            <p>A partir del <a href="resources/06bd-empresa.sql"><em>script</em> DDL</a> puedes importar los datos
              mediante:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos="1 "></span>mariadb<span class="w"> </span>-u<span class="w"> </span>s8a<span class="w"> </span>-p<span class="w"> </span>&lt;<span class="w"> </span>06bd-empresa.sql<span class="p">;</span>
</code></pre>
            </div>
            <p>A continuación, nos conectamos mediante el cliente que nos sintamos más cómodo. Por ejemplo:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos="1 "></span>mariadb<span class="w"> </span>-u<span class="w"> </span>s8a<span class="w"> </span>-p<span class="w"> </span>empresa<span class="p">;</span>
</code></pre>
            </div>
            <p>Recuerda que, si quieres saber la estructura de una tabla, podemos utilizar la sentencia
              <code>DESCRIBE</code>/ <code>DESC</code>:</p>
            <div class="highlight">
              <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">DESCRIBE</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +----------+---------------+------+-----+---------+----------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | Field    | Type          | Null | Key | Default | Extra          |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +----------+---------------+------+-----+---------+----------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodEmp   | int(10)       | NO   | PRI | NULL    | auto_increment |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | CodDep   | char(5)       | YES  | MUL | NULL    |                |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | ExTelEmp | varchar(9)    | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | FecInEmp | date          | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | FecNaEmp | date          | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | NifEmp   | varchar(9)    | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | NomEmp   | varchar(40)   | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | NumHi    | int(1)        | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | SalEmp   | decimal(12,2) | YES  |     | NULL    |                |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +----------+---------------+------+-----+---------+----------------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- 9 rows in set (0.000 sec)</span>
</code></pre>
            </div>
          </div>
          <p>En la sesión anterior estudiamos tanto la parte DDL como DML del lenguaje SQL. En esta sesión y las
            siguientes nos vamos a centrar en las consultas, que formarían parte de DML, y más en concreto de DQL
            (<em>Data Query Language</em>). Para ello, utilizaremos la sentencia <code>SELECT</code> definiendo
            consultas que ocupan una línea o varias decenas, que accede a una única tabla (o vista), o a múltiples
            tablas combinadas mediante el uso de <em>joins</em>, e incluso que utiliza diversos esquemas dentro de la
            misma base de datos. </p>
          <p>Así pues, entremos en detalle en la sentencia <strong><code>SELECT ... FROM</code></strong>. Su sintaxis
            completa, con las opciones más frecuentes, tanto para <a
              href="https://mariadb.com/kb/en/select/">MariaDB</a> como para <em>PostgreSQL</em> es:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">SELECT</span><span class="w"> </span><span class="err">{</span><span class="o">*</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="p">[</span><span class="k">DISTINCT</span><span class="p">]</span><span class="w"> </span><span class="err">{</span><span class="n">columna</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">expresión</span><span class="err">}</span><span class="w"> </span><span class="p">[[</span><span class="k">AS</span><span class="p">]</span><span class="w"> </span><span class="k">alias</span><span class="p">],</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="err">}</span>
<span class="linenos" data-linenos="2 "></span><span class="k">FROM</span><span class="w"> </span><span class="n">tabla</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="p">[</span><span class="k">WHERE</span><span class="w"> </span><span class="n">condición</span><span class="p">]</span>
<span class="linenos" data-linenos="4 "></span><span class="w">    </span><span class="p">[</span><span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col1</span><span class="w"> </span><span class="p">[,</span><span class="w"> </span><span class="n">col2</span><span class="p">]</span><span class="w"> </span><span class="p">...]</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span><span class="p">[</span><span class="k">HAVING</span><span class="w"> </span><span class="n">predicado</span><span class="w"> </span><span class="n">grupo</span><span class="p">]</span>
<span class="linenos" data-linenos="6 "></span><span class="w">    </span><span class="p">[</span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">col</span><span class="o">-</span><span class="n">n</span><span class="o">|</span><span class="w"> </span><span class="n">pos</span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="p">[</span><span class="k">ASC</span><span class="o">|</span><span class="k">DESC</span><span class="p">]</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">col</span><span class="o">-</span><span class="n">m</span><span class="o">|</span><span class="w"> </span><span class="n">pos</span><span class="o">-</span><span class="n">m</span><span class="w"> </span><span class="p">[</span><span class="k">ASC</span><span class="o">|</span><span class="n">DES</span><span class="p">]</span><span class="err">…</span><span class="p">]</span>
<span class="linenos" data-linenos="7 "></span><span class="w">    </span><span class="p">[</span><span class="k">LIMIT</span><span class="w"> </span><span class="err">{</span><span class="p">[</span><span class="k">offset</span><span class="p">,]</span><span class="w"> </span><span class="k">row_count</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="k">row_count</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="k">offset</span><span class="err">}</span><span class="p">];</span>
</code></pre>
          </div>
          <p>En todo consulta siempre deberemos indicar qué datos queremos recuperar y de dónde lo haremos. Tras
            ejecutar una consulta obtendremos una tabla de datos, que puede tener una o varias columnas y ninguna, una o
            varias filas.</p>
          <div class="admonition tip">
            <p class="admonition-title">Formato</p>
            <p>A la hora de escribir una consulta, podemos dividirla en varias líneas para facilitar su legibilidad.
              Recuerda que hasta que no encuentre el carácter de <code>;</code>, el intérprete SQL no ejecutará la
              consulta.</p>
            <p>Además, podemos utilizar espacios o tabuladores para indentar el código:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- Todo en una línea</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellidos</span><span class="p">,</span><span class="w"> </span><span class="n">fnac</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">cliente</span><span class="w"> </span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salario</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- En líneas separadas</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span><span class="w"> </span><span class="n">apellidos</span><span class="p">,</span><span class="w"> </span><span class="n">fnac</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">from</span><span class="w"> </span><span class="n">cliente</span>
<span class="linenos" data-linenos=" 7 "></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salario</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- En líneas separadas, con atributos en diversas líneas</span>
<span class="linenos" data-linenos="10 "></span><span class="k">select</span><span class="w"> </span><span class="n">nombre</span><span class="p">,</span>
<span class="linenos" data-linenos="11 "></span><span class="w">    </span><span class="n">apellidos</span><span class="p">,</span>
<span class="linenos" data-linenos="12 "></span><span class="w">    </span><span class="n">fnac</span>
<span class="linenos" data-linenos="13 "></span><span class="k">from</span><span class="w"> </span><span class="n">cliente</span>
<span class="linenos" data-linenos="14 "></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">salario</span><span class="w"> </span><span class="k">desc</span><span class="p">;</span>
</code></pre>
            </div>
          </div>
          <h3 id="proyeccion">Proyección<a class="headerlink" href="06sql.html#proyeccion"
              title="Permanent link">&para;</a></h3>
          <p>Para seleccionar campos utilizaremos bien <strong><code>*</code></strong> para indicar que queremos todas
            las columnas, o indicaremos de uno en uno el nombre de los campos que queremos recuperar;</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">centro</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+-----------+--------------------+-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodCen | CodEmpDir | NomCen             | DirCen                      | PobCen    |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------+--------------------+-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | DIGE   |         1 | Dirección General  | Av. Constitución 88         | Murcia    |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | FAZS   |         6 | Fábrica Zona Sur   | Pol. Ind. Gral. Bastarreche | Cartagena |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | OFZS   |         5 | Oficinas Zona Sur  | Pl. España 14               | Cartagena |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- +--------+-----------+--------------------+-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
<span class="linenos" data-linenos="10 "></span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodCen</span><span class="p">,</span><span class="w"> </span><span class="n">PobCen</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">centro</span><span class="p">;</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +--------+-----------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | CodCen | PobCen    |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +--------+-----------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | DIGE   | Murcia    |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | FAZS   | Cartagena |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | OFZS   | Cartagena |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- +--------+-----------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Para renombrar las columnas obtenidas, tras cada columna, mediante <strong><code>as</code></strong> podemos
            indicarle un alias a cada una de ellas:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodCen</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">codigo</span><span class="p">,</span><span class="w"> </span><span class="n">PobCen</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">poblacion</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">centro</span><span class="p">;</span>
</span><span class="linenos" data-linenos="2 "></span><span class="c1">-- +--------+-----------+</span>
<span class="hll"><span class="linenos" data-linenos="3 "></span><span class="c1">-- | codigo | poblacion |</span>
</span><span class="linenos" data-linenos="4 "></span><span class="c1">-- +--------+-----------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- | DIGE   | Murcia    |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- | FAZS   | Cartagena |</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- | OFZS   | Cartagena |</span>
<span class="linenos" data-linenos="8 "></span><span class="c1">-- +--------+-----------+</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="duplicados">Duplicados<a class="headerlink" href="06sql.html#duplicados"
              title="Permanent link">&para;</a></h4>
          <p>Si realizamos la siguiente consulta sobre la tabla <code>empleado</code>, obtendremos todos los códigos de
            departamento de los empleados. Como podéis observar, aparecen repetidos, porque obtenemos una fila por
            empleado existente en la tabla:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodDep |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | ADMZS  |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | DIRGE  |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | IN&amp;DI  |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | JEFZS  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | PROZS  |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | PROZS  |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | PROZS  |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | PROZS  |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | VENZS  |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | VENZS  |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si nos interesa recuperar datos que no contengan repetidos, podemos emplear
            <strong><code>distinct</code></strong>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="k">distinct</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodDep |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | ADMZS  |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | DIRGE  |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | IN&amp;DI  |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | JEFZS  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | PROZS  |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | VENZS  |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- +--------+</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- 6 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="operaciones-aritmeticas">Operaciones aritméticas<a class="headerlink"
              href="06sql.html#operaciones-aritmeticas" title="Permanent link">&para;</a></h4>
          <p>Cada vez que hacemos referencia a un campo o un valor, también podemos realizar operación aritmética sobre
            el valor de los campos (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>%</code>, ...)
          </p>
          <p>Por ejemplo, mediante la siguiente consulta podemos obtener de cada empleado, su nombre y salario, y su
            salario incrementado un 16%:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">16</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+------------+--------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | SalEmp     | SalEmp*1.16  |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+------------+--------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 7200000.00 | 8352000.0000 |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | 4500000.00 | 5220000.0000 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Monforte Cid, Roldán        | 5200000.00 | 6032000.0000 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Topaz Illán, Carlos         | 3200000.00 | 3712000.0000 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Alada Veraz, Juana          | 6200000.00 | 7192000.0000 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Gozque Altanero, Cándido    | 5000000.00 | 5800000.0000 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Forzado López, Galeote      | 1600000.00 | 1856000.0000 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | 1600000.00 | 1856000.0000 |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Mando Correa, Rosa          | 3100000.00 | 3596000.0000 |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Mosc Amuerta, Mario         | 1300000.00 | 1508000.0000 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------------------------+------------+--------------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>Además, podemos hacer cálculos sobre cálculos de otras columnas previas, utilizando asignaciones. Para
            ello, asignamos el resultado de una expresión a una variable a la que anteponemos el símbolo <code>@</code>.
            De esta forma, podemos usar dicha variable a lo largo de nuestra consulta:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="p">,</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="w">       </span><span class="o">@</span><span class="n">SalImp</span><span class="p">:</span><span class="o">=</span><span class="n">SalEmp</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">16</span><span class="p">,</span>
</span><span class="hll"><span class="linenos" data-linenos=" 3 "></span><span class="w">       </span><span class="o">@</span><span class="n">SalImp</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">05</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">bonus</span>
</span><span class="linenos" data-linenos=" 4 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------------------------+------------+----------------------+---------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | NomEmp                      | SalEmp     | @SalImp:=SalEmp*1.16 | bonus   |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +-----------------------------+------------+----------------------+---------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 7200000.00 |              8352000 | 8769600 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | 4500000.00 |              5220000 | 5481000 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Monforte Cid, Roldán        | 5200000.00 |              6032000 | 6333600 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Topaz Illán, Carlos         | 3200000.00 |              3712000 | 3897600 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Alada Veraz, Juana          | 6200000.00 |              7192000 | 7551600 |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Gozque Altanero, Cándido    | 5000000.00 |              5800000 | 6090000 |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Forzado López, Galeote      | 1600000.00 |              1856000 | 1948800 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | 1600000.00 |              1856000 | 1948800 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Mando Correa, Rosa          | 3100000.00 |              3596000 | 3775800 |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Mosc Amuerta, Mario         | 1300000.00 |              1508000 | 1583400 |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- +-----------------------------+------------+----------------------+---------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 10 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p><a name="CASE"></a></p>
          <div class="admonition tip">
            <p class="admonition-title">El operador CASE</p>
            <p>El operador <a href="https://mariadb.com/kb/en/case-operator/">CASE</a> permite agregar a la proyección
              la estructura lógica condicional de <code>if/else</code>. Su sintaxis es la siguiente:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">CASE</span><span class="w"> </span><span class="n">campo</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">valor1</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">[</span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">valor2</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="p">[</span><span class="k">ELSE</span><span class="w"> </span><span class="n">resultado</span><span class="p">]</span><span class="w"> </span><span class="k">END</span>
<span class="linenos" data-linenos="2 "></span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">condición</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">[</span><span class="k">WHEN</span><span class="w"> </span><span class="p">[</span><span class="n">condición</span><span class="p">]</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="n">resultado</span><span class="w"> </span><span class="p">...]</span><span class="w"> </span><span class="p">[</span><span class="k">ELSE</span><span class="w"> </span><span class="n">resultado</span><span class="p">]</span><span class="w"> </span><span class="k">END</span>
</code></pre>
            </div>
            <p>Por ejemplo, a la hora de mostrar los empleados, si queremos que cuando el número de teléfono sea nulo
              muestre <code>0000</code> haríamos:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="ss">&quot;0000&quot;</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NuevaExt |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | 1111     |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      2 | 2233     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      3 | 2133     |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      4 | 3838     |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | 1239     |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      6 | 23838    |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      7 | 0000     |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |      8 | 0000     |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |      9 | 12124    |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |     10 | 0000     |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 10 rows in set (0.001 sec)</span>
</code></pre>
            </div>
            <p>Veamos otro ejemplo. En el caso de los departamentos, la columna <code>TiDir</code> indica el tipo de
              director, con los valores <code>P</code> para indicar en propiedad y <code>F</code> para detallar que es
              un director en funciones. Si quisiéramos mostrar la frase <code>Definitivo</code> o <code>Interino</code>
              para estos casos haríamos:</p>
            <div class="highlight">
              <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">TiDir</span><span class="p">,</span>
<span class="linenos" data-linenos=" 2 "></span><span class="w">       </span><span class="k">CASE</span><span class="w"> </span><span class="n">TiDir</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="ss">&quot;P&quot;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="ss">&quot;Definitivo&quot;</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="ss">&quot;F&quot;</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="ss">&quot;Interino&quot;</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">TipoDirector</span>
<span class="linenos" data-linenos=" 3 "></span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-------+--------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodDep | TiDir | TipoDirector |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+-------+--------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | ADMZS  | P     | Definitivo   |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | DIRGE  | P     | Definitivo   |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | IN&amp;DI  | P     | Definitivo   |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | JEFZS  | F     | Interino     |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | PROZS  | P     | Definitivo   |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | VENZS  | F     | Interino     |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- +--------+-------+--------------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- 6 rows in set (0.000 sec)</span>
</code></pre>
            </div>
          </div>
          <h3 id="funciones">Funciones<a class="headerlink" href="06sql.html#funciones"
              title="Permanent link">&para;</a></h3>
          <p>A la hora de recuperar o filtrar datos, es muy común utilizar <a
              href="https://mariadb.com/kb/en/built-in-functions/">funciones</a> que facilitan el trabajo con cadenas,
            cálculos numéricos, etc.. Como ya has estudiado en el módulo profesional de <em>Programación</em>, las
            funciones reciben uno o más datos de entrada, también conocidos como parámetros (aunque existen algunas
            funciones que no reciben ninguno), y devuelven un resultado en base a los datos de entrada.</p>
          <p>Cabe destacar que las funciones no están completamente estandarizadas entre los diferentes SGBD, así pue,
            conviene revisar la sintaxis exacta en el caso de migrar de un sistema a otro.</p>
          <h4 id="funciones-agregadas">Funciones agregadas<a class="headerlink" href="06sql.html#funciones-agregadas"
              title="Permanent link">&para;</a></h4>
          <p>Se emplean para realizar cálculos sobre el total de elementos de la consulta (o agrupación). Tras el
            <code>SELECT</code> indicaremos la función (o funciones) a realizar sobre el total de elementos devueltos
            por la consulta.</p>
          <p>Vamos a comenzar contando la cantidad de filas mediante la función <a
              href="https://mariadb.com/kb/en/count/"><code>COUNT(expr)</code></a> pasándole como expresión
            <code>*</code>, lo cual indica que utilice todas las columnas, independientemente de su valor:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- Cantidad de empleados</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | COUNT(*) |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |       10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- Cantidad de registros en la relación N:M entre empleado y habilidad</span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">habemp</span><span class="p">;</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | COUNT(*) |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |        6 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +----------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si queremos recuperar cuantos elementos diferentes tenemos de un campo, en la expresión usaremos
            <code>DISTINCT</code>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">-- Cantidad de empleados que tienen habilidades</span>
<span class="hll"><span class="linenos" data-linenos="2 "></span><span class="k">select</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="k">DISTINCT</span><span class="w"> </span><span class="n">codemp</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">habemp</span><span class="p">;</span>
</span><span class="linenos" data-linenos="3 "></span><span class="c1">-- +------------------------+</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- | COUNT(DISTINCT codemp) |</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- +------------------------+</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- |                      4 |</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- +------------------------+</span>
<span class="linenos" data-linenos="8 "></span><span class="c1">-- 1 row in set (0.002 sec)</span>
</code></pre>
          </div>
          <p>Otras funciones de agregación que podemos emplear son:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/sum/"><code>SUM(expr)</code></a>: Suma todos los valores de una
              expresión/columna</li>
            <li><a href="https://mariadb.com/kb/en/min/"><code>MIN(expr)</code></a> / <a
                href="https://mariadb.com/kb/en/max/"><code>MAX(expr)</code></a>: Mínimo o máximo de una
              expresión/columna</li>
            <li><a href="https://mariadb.com/kb/en/avg/"><code>AVG(expr)</code></a>: Valor medio de una
              expresión/columna</li>
          </ul>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- Total de hijos de los empleados</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">NumHi</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | SUM(NumHi) |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |          7 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +------------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- Salario más alto</span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +-------------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | MAX(SalEmp) |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +-------------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |  7200000.00 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +-------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 1 row in set (0.001 sec)</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- Salario medio</span>
<span class="hll"><span class="linenos" data-linenos="20 "></span><span class="k">select</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos="21 "></span><span class="c1">-- +----------------+</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- | AVG(SalEmp)    |</span>
<span class="linenos" data-linenos="23 "></span><span class="c1">-- +----------------+</span>
<span class="linenos" data-linenos="24 "></span><span class="c1">-- | 3890000.000000 |</span>
<span class="linenos" data-linenos="25 "></span><span class="c1">-- +----------------+</span>
<span class="linenos" data-linenos="26 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos="27 "></span>
<span class="linenos" data-linenos="28 "></span><span class="c1">-- Salario máximo y medio de empleados</span>
<span class="hll"><span class="linenos" data-linenos="29 "></span><span class="k">select</span><span class="w"> </span><span class="k">MAX</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">),</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos="30 "></span><span class="c1">-- +-------------+----------------+</span>
<span class="linenos" data-linenos="31 "></span><span class="c1">-- | MAX(SalEmp) | AVG(SalEmp)    |</span>
<span class="linenos" data-linenos="32 "></span><span class="c1">-- +-------------+----------------+</span>
<span class="linenos" data-linenos="33 "></span><span class="c1">-- |  7200000.00 | 3890000.000000 |</span>
<span class="linenos" data-linenos="34 "></span><span class="c1">-- +-------------+----------------+</span>
<span class="linenos" data-linenos="35 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>En la próxima unidad estudiaremos como podemos <a href="07sql-group.html#agregaciones">agregar datos</a>
            por algunas columnas y realizar cálculos sobre ellas, lo que nos permitirá obtener información del tipo
            <em>"Cantidad de empleados de cada departamento"</em>, <em>"Salario medio por centro de los empleados"</em>,
            etc...</p>
          <h4 id="cadenas">Cadenas<a class="headerlink" href="06sql.html#cadenas" title="Permanent link">&para;</a></h4>
          <p>Mediante <a href="https://mariadb.com/kb/en/string-functions/">funciones de cadenas de texto</a> podemos
            realizar múltiples operaciones:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/concat/"><code>CONCAT(cadena1, cadena2, …)</code></a>: permite
              unir/concatenar cadenas</li>
            <li><a href="https://mariadb.com/kb/en/lower/"><code>LOWER(cadena)</code> / <code>LCASE(cadena)</code></a>:
              transforma <code>cadena</code> a minúsculas</li>
            <li><a href="https://mariadb.com/kb/en/upper/"><code>UPPER(cadena)</code> / <code>UCASE(cadena)</code></a>:
              transforma <code>cadena</code> en MAYÚSCULAS</li>
            <li><a href="https://mariadb.com/kb/en/left/"><code>LEFT(cadena, longitud)</code></a> / <a
                href="https://mariadb.com/kb/en/right/"><code>RIGHT</code></a>: devuelve los <code>longitud</code>
              caracteres de más a la izquierda/derecha de la <code>cadena</code></li>
            <li><a href="https://mariadb.com/kb/en/trim/"><code>TRIM(cadena)</code></a> / <a
                href="https://mariadb.com/kb/en/ltrim/"><code>LTRIM</code></a> / <a
                href="https://mariadb.com/kb/en/rtrim/"><code>RTRIM</code></a>: elimina los espacios en blanco por
              delante y por detrás, o solos los de delante/izquierda (<em>L</em>) o sólo los de detrás/derecha
              (<em>R</em>)</li>
          </ul>
          <p>Algunos ejemplos de su uso:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CONCAT</span><span class="p">(</span><span class="n">CodEmp</span><span class="p">,</span><span class="s1">&#39;_&#39;</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">concatenacion</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +---------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | concatenacion |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +---------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | 5_ADMZS       |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | 1_DIRGE       |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | 2_IN&amp;DI       |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | 6_JEFZS       |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | 7_PROZS       |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | 8_PROZS       |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | 9_PROZS       |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | 10_PROZS      |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | 3_VENZS       |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | 4_VENZS       |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +---------------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
<span class="linenos" data-linenos="17 "></span>
<span class="hll"><span class="linenos" data-linenos="18 "></span><span class="k">select</span><span class="w"> </span><span class="k">UPPER</span><span class="p">(</span><span class="n">NomEmp</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos="19 "></span><span class="c1">-- +-----------------------------+</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- | UPPER(NomEmp)               |</span>
<span class="linenos" data-linenos="21 "></span><span class="c1">-- +-----------------------------+</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- | SALADINO MANDAMÁS, AUGUSTO  |</span>
<span class="linenos" data-linenos="23 "></span><span class="c1">-- | MANRIQUE BACTERIO, LUISA    |</span>
<span class="linenos" data-linenos="24 "></span><span class="c1">-- | MONFORTE CID, ROLDÁN        |</span>
<span class="linenos" data-linenos="25 "></span><span class="c1">-- | TOPAZ ILLÁN, CARLOS         |</span>
<span class="linenos" data-linenos="26 "></span><span class="c1">-- | ALADA VERAZ, JUANA          |</span>
<span class="linenos" data-linenos="27 "></span><span class="c1">-- | GOZQUE ALTANERO, CÁNDIDO    |</span>
<span class="linenos" data-linenos="28 "></span><span class="c1">-- | FORZADO LÓPEZ, GALEOTE      |</span>
<span class="linenos" data-linenos="29 "></span><span class="c1">-- | MASCULLAS ALTO, ELOÍSA      |</span>
<span class="linenos" data-linenos="30 "></span><span class="c1">-- | MANDO CORREA, ROSA          |</span>
<span class="linenos" data-linenos="31 "></span><span class="c1">-- | MOSC AMUERTA, MARIO         |</span>
<span class="linenos" data-linenos="32 "></span><span class="c1">-- +-----------------------------+</span>
<span class="linenos" data-linenos="33 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Otras funciones que podemos utilizar son <code>CHAR_LENGTH(cadena)</code> para obtener el tamaño, <a
              href="https://mariadb.com/kb/en/locate/"><code>LOCATE(subcadena, cadena)</code></a> para encontrar una
            subcadena en una cadena, REPLACE(cadena, cadenaOrigen,
            cadenaDestino)<code>para sustituir una subcadena por otra o</code>REVERSE(cadena)` para invertir una cadena.
          </p>
          <h4 id="fecha-hora">Fecha / Hora<a class="headerlink" href="06sql.html#fecha-hora"
              title="Permanent link">&para;</a></h4>
          <p>Si trabajamos con campos de tipo fecha, podemos emplear las siguientes <a
              href="https://mariadb.com/kb/en/date-time-functions/">funciones</a>:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/now/"><code>NOW()</code> / <code>CURRENT_TIMESTAMP</code></a>: fecha
              y hora actual del sistema.</li>
            <li><a href="https://mariadb.com/kb/en/curdate/"><code>CURDATE()</code></a>: fecha actual en formato
              <code>yyyy-mm-dd</code> o <code>yyyymmdd</code>.</li>
            <li><a href="https://mariadb.com/kb/en/datediff/"><code>DATEDIFF(fecha1, fecha2)</code></a>: diferencia de
              días entre dos fechas.</li>
            <li><a
                href="https://mariadb.com/kb/en/timestampdiff/"><code>TIMESTAMPDIFF(unidad, fecha1, fecha2)</code></a>:
              diferencia medida en <code>unidad</code> entre dos fechas.</li>
            <li><a href="https://mariadb.com/kb/en/date_add/"><code>DATE_ADD(fecha, INTERVAL expresión Tipo)</code></a>
              / <a href="https://mariadb.com/kb/en/date_sub/"><code>DATE_SUB</code></a>, pudiendo utilizar los
              siguientes <a href="https://mariadb.com/kb/en/date-and-time-units/">tipos</a>.</li>
          </ul>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- fecha y hora actual (en el momento de crear los apuntes)</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">();</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +---------------------+---------------------+------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | NOW()               | CURRENT_TIMESTAMP   | CURDATE()  |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +---------------------+---------------------+------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | 2024-11-17 17:39:51 | 2024-11-17 17:39:51 | 2024-11-17 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +---------------------+---------------------+------------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos=" 9 "></span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- días que faltan hasta navidad</span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="n">DATEDIFF</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="s1">&#39;2024-12-25&#39;</span><span class="p">);</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +-------------------------------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | DATEDIFF(NOW(), &#39;2024-12-25&#39;) |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +-------------------------------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |                           -38 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +-------------------------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos="18 "></span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- fecha de hoy y dentro de 3 meses</span>
<span class="hll"><span class="linenos" data-linenos="20 "></span><span class="k">select</span><span class="w"> </span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="n">DATE_ADD</span><span class="p">(</span><span class="n">NOW</span><span class="p">(),</span><span class="w"> </span><span class="nb">INTERVAL</span><span class="w"> </span><span class="o">+</span><span class="mi">3</span><span class="w"> </span><span class="k">MONTH</span><span class="p">)</span>
</span><span class="linenos" data-linenos="21 "></span><span class="c1">-- +---------------------+------------------------------------+</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- | NOW()               | DATE_ADD(NOW(), INTERVAL +3 MONTH) |</span>
<span class="linenos" data-linenos="23 "></span><span class="c1">-- +---------------------+------------------------------------+</span>
<span class="linenos" data-linenos="24 "></span><span class="c1">-- | 2024-11-17 17:35:08 | 2025-02-17 17:35:08                |</span>
<span class="linenos" data-linenos="25 "></span><span class="c1">-- +---------------------+------------------------------------+</span>
<span class="linenos" data-linenos="26 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Por otro lado, además de operaciones sobre campos fecha, también podemos realizar transformaciones sobre
            fecha para obtener una parte o información relativa a la misma:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/year/"><code>YEAR(fecha)</code></a>: año en formato <code>aaaa</code>
            </li>
            <li><a href="https://mariadb.com/kb/en/month/"><code>MONTH(fecha)</code></a>: mes en formato <code>mm</code>
            </li>
            <li>Otras funciones útiles son <code>SECOND</code>, <code>MINUTE</code>, <code>HOUR</code>,
              <code>DAY</code>, <code>WEEK</code>, <code>DAYOFWEEK</code> …</li>
          </ul>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="k">YEAR</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">anyoInc</span><span class="p">,</span><span class="w"> </span><span class="k">MONTH</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">mesInc</span><span class="p">,</span><span class="w"> </span><span class="n">DAYOFWEEK</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">diaSemana</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+------------+---------+--------+-----------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | FecInEmp   | anyoInc | mesInc | diaSemana |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+------------+---------+--------+-----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | 1972-07-01 |    1972 |      7 |         7 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      2 | 1991-06-14 |    1991 |      6 |         6 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      3 | 1984-06-08 |    1984 |      6 |         6 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      4 | 1990-08-09 |    1990 |      8 |         5 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | 1976-08-07 |    1976 |      8 |         7 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      6 | 1991-08-01 |    1991 |      8 |         5 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      7 | 1994-06-30 |    1994 |      6 |         5 |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |      8 | 1994-08-15 |    1994 |      8 |         2 |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |      9 | 1982-06-10 |    1982 |      6 |         5 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |     10 | 1993-11-02 |    1993 |     11 |         3 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +--------+------------+---------+--------+-----------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Por último, para formatear un campo de tipo fecha y mostrarla conforme necesitemos, podemos hacer uso de <a
              href="https://mariadb.com/kb/en/date_format/"><code>DATE_FORMAT(fecha, formato)</code></a> para obtener
            información similar a la anterior (le podemos pasar un tercer parámetro con el <em>locale</em> para
            configurar el idioma de salida y sobrescribir el del sistema):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">FecInEmp</span><span class="p">,</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="w">       </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;%Y %y&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">anyoInc</span><span class="p">,</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="w">       </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;%M %m&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">mesInc</span><span class="p">,</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">       </span><span class="n">DATE_FORMAT</span><span class="p">(</span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;%w&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">diaSemana</span>
<span class="linenos" data-linenos=" 5 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+------------+---------+-------------+-----------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | CodEmp | FecInEmp   | anyoInc | mesInc      | diaSemana |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- +--------+------------+---------+-------------+-----------+</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      1 | 1972-07-01 | 1972 72 | July 07     |         7 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      2 | 1991-06-14 | 1991 91 | June 06     |         6 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      3 | 1984-06-08 | 1984 84 | June 06     |         6 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      4 | 1990-08-09 | 1990 90 | August 08   |         5 |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |      5 | 1976-08-07 | 1976 76 | August 08   |         7 |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |      6 | 1991-08-01 | 1991 91 | August 08   |         5 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |      7 | 1994-06-30 | 1994 94 | June 06     |         5 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- |      8 | 1994-08-15 | 1994 94 | August 08   |         2 |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- |      9 | 1982-06-10 | 1982 82 | June 06     |         5 |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- |     10 | 1993-11-02 | 1993 93 | November 11 |         3 |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- +--------+------------+---------+-------------+-----------+</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- 10 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>Finalmente, otra función muy importante a la hora de trabajar con fechas es la función <a
              href="https://mariadb.com/kb/en/cast/"><code>CAST(expr as tipo)</code></a> que realiza la conversión de
            tipos de datos.</p>
          <p>De esta manera podemos convertir una expresión de cadena en un tipo fecha:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="k">CAST</span><span class="p">(</span><span class="ss">&quot;2024-12-9&quot;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nb">DATE</span><span class="p">);</span>
</code></pre>
          </div>
          <h4 id="condicionales-y-nulos">Condicionales y Nulos<a class="headerlink"
              href="06sql.html#condicionales-y-nulos" title="Permanent link">&para;</a></h4>
          <p>De forma similar al operador <a href="06sql.html#CASE"><code>CASE</code></a>, si preferimos, podemos hacer
            uso de la función <a href="https://mariadb.com/kb/en/if-function/"><code>IF(expr,V,F)</code></a>.</p>
          <p>Por ejemplo, podemos reescribir la misma consulta vista anteriormente:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="k">CASE</span><span class="w"> </span><span class="k">WHEN</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="k">THEN</span><span class="w"> </span><span class="ss">&quot;0000&quot;</span><span class="w"> </span><span class="k">ELSE</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">END</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span>
<span class="linenos" data-linenos="2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</code></pre>
          </div>
          <p>por otra que utilice la función <code>IF</code> mejorando la legibilidad:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;0000&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodEmp | NuevaExt |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- |      1 | 1111     |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      2 | 2233     |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      3 | 2133     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      4 | 3838     |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      5 | 1239     |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      6 | 23838    |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      7 | 0000     |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      8 | 0000     |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |      9 | 12124    |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |     10 | 0000     |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +--------+----------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.003 sec)</span>
</code></pre>
          </div>
          <p>Cuando trabajamos con nulos también podemos emplear las funciones:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/ifnull/"><code>IFNULL(campo, valor)</code></a>: devuelve
              <code>valor</code> si <code>campo</code> es nulo</li>
            <li><a href="https://mariadb.com/kb/en/coalesce/"><code>COALESCE(campo1, campo2, ...)</code></a>: devuelve
              el primer valor no nulo de la lista de parámetros.</li>
          </ul>
          <p>Dicho esto, las siguientes consultas obtienen el mismo resultado:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="k">IF</span><span class="p">(</span><span class="n">ExTelEmp</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;0000&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ExTelEmp</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">IFNULL</span><span class="p">(</span><span class="n">ExTelEmp</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;0000&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">ExTelEmp</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;0000&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NuevaExt</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
</code></pre>
          </div>
          <h4 id="otras">Otras<a class="headerlink" href="06sql.html#otras" title="Permanent link">&para;</a></h4>
          <p>También tenemos funciones <a href="https://mariadb.com/kb/en/numeric-functions/">matemáticas</a> como:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/abs/"><code>ABS(num)</code></a>: obtiene el valor absoluto de
              <code>num</code></li>
            <li><a href="https://mariadb.com/kb/en/sqrt/"><code>SQRT(num)</code></a>, <a
                href="https://mariadb.com/kb/en/pow/"><code>POW(base, exponente)</code></a>: raíz cuadrada de
              <code>num</code>, potencia de <code>base</code> elevado a <code>exponente</code></li>
            <li><a href="https://mariadb.com/kb/en/rand/"><code>RAND()</code></a>: obtiene un número aleatorio</li>
            <li><a href="https://mariadb.com/kb/en/round/"><code>ROUND(num)</code></a> / <a
                href="https://mariadb.com/kb/en/floor/"><code>FLOOR(num)</code></a> / <a
                href="https://mariadb.com/kb/en/ceiling/"><code>CEILING(num)</code></a>: redondea un número, por exceso
              o por defecto</li>
            <li><a href="https://mariadb.com/kb/en/abs/"><code>TRUNCATE(num,d)</code></a>: trunca <code>num</code> con
              <code>d</code> decimales</li>
          </ul>
          <p>Veamos unos ejemplos de redondeo de cantidades:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">NumHi</span><span class="p">),</span><span class="w"> </span><span class="n">ROUND</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">NumHi</span><span class="p">)),</span><span class="w"> </span><span class="n">FLOOR</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">NumHi</span><span class="p">)),</span><span class="w"> </span><span class="n">CEILING</span><span class="p">(</span><span class="k">avg</span><span class="p">(</span><span class="n">NumHi</span><span class="p">)),</span><span class="w"> </span><span class="k">TRUNCATE</span><span class="p">(</span><span class="k">AVG</span><span class="p">(</span><span class="n">NumHi</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">-- +------------+-------------------+-------------------+---------------------+-------------------------+</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">-- | AVG(NumHi) | ROUND(avg(NumHi)) | FLOOR(avg(NumHi)) | CEILING(avg(NumHi)) | truncate(avg(NumHi), 1) |</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- +------------+-------------------+-------------------+---------------------+-------------------------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- |     0.7000 |                 1 |                 0 |                   1 |                     0.7 |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- +------------+-------------------+-------------------+---------------------+-------------------------+</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Otra función muy empleada es <a
              href="https://mariadb.com/kb/en/format/"><code>FORMAT(numero, decimales)</code></a> para formatear los
            números con separadores de miles y cantidad de decimales:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">1234567890</span><span class="p">.</span><span class="mi">12345678</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">1234567890</span><span class="p">.</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">),</span><span class="w"> </span><span class="n">FORMAT</span><span class="p">(</span><span class="mi">1234567890</span><span class="p">.</span><span class="mi">12345678</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">-- +--------------------------------+--------------------------+--------------------------------+</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">-- | FORMAT(1234567890.12345678, 4) | FORMAT(1234567890.12, 4) | FORMAT(1234567890.12345678, 0) |</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- +--------------------------------+--------------------------+--------------------------------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- | 1,234,567,890.1235             | 1,234,567,890.1200       | 1,234,567,890                  |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- +--------------------------------+--------------------------+--------------------------------+</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>También podemos emplear funciones para <a
              href="https://mariadb.com/kb/en/encryption-hashing-and-compression-functions/">encriptar o comprimir</a>,
            así como para trabajar con <a href="https://mariadb.com/kb/en/geographic-functions/">coordenadas
              geográficas</a>.</p>
          <h3 id="ordenando-y-limitando">Ordenando y Limitando<a class="headerlink"
              href="06sql.html#ordenando-y-limitando" title="Permanent link">&para;</a></h3>
          <p>Es muy común tener que ordenar el resultado de una consulta para darle más importancia a unos campos que
            otros, e incluso, reducir el número de tuplas recuperadas.</p>
          <p>Así pues, para ordenar mediante la cláusula <a
              href="https://mariadb.com/kb/en/order-by/"><code>ORDER BY {campo | pos} [ASC|DESC]</code></a>, indicando
            los diferentes campos separados por coma.</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NifEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | NifEmp    |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Alada Veraz, Juana          | 38223923T |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Forzado López, Galeote      | 47123132D |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Gozque Altanero, Cándido    | 26454122D |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Mando Correa, Rosa          | 11312121D |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | 21231347K |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | 32132154H |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Monforte Cid, Roldán        | 23823930D |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mosc Amuerta, Mario         | 32939393D |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 21451451V |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Topaz Illán, Carlos         | 38293923L |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.003 sec)</span>
</code></pre>
          </div>
          <p>Por defecto, la ordenación se realiza de forma ascendente. Por lo tanto, la consulta anterior y la
            siguiente son similares:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NifEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NifEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span>
</code></pre>
          </div>
          <p>Algunos desarrolladores prefieren explicitar el orden de <code>ORDER BY</code> para evitar ambigüedades.
            Otros, en cambio, prefieren obviar la opción <code>ASC</code> para reducir el tamaño de las consultas.</p>
          <p>Por otro lado, tal como hemos comentado previamente, podemos ordenar por más de una columna, indicando para
            cada una de ellas diferentes tipos de ordenaciones:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">ASC</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodDep | NomEmp                      |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | ADMZS  | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | DIRGE  | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | IN&amp;DI  | Manrique Bacterio, Luisa    |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | JEFZS  | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | PROZS  | Mosc Amuerta, Mario         |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | PROZS  | Mascullas Alto, Eloísa      |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | PROZS  | Mando Correa, Rosa          |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | PROZS  | Forzado López, Galeote      |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | VENZS  | Topaz Illán, Carlos         |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | VENZS  | Monforte Cid, Roldán        |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <div class="admonition tip">
            <p class="admonition-title">Rendimiento</p>
            <p>Hay que tener en cuenta que ordenar los resultados de una consulta requiere colocar todos los datos en
              memoria, y dependiendo de la cantidad, puede ser una operación computacionalmente compleja.</p>
          </div>
          <p>Finalmente, a la hora de indicar el nombre de las columnas de ordenación, también podemos un número
            indicando la posición de la columna (en el siguiente ejemplo, 1 referencia a <code>NomEmp</code> y 2 a
            <code>NifEmp</code>):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">Nifemp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">ASC</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | Nifemp    |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Alada Veraz, Juana          | 38223923T |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Forzado López, Galeote      | 47123132D |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Gozque Altanero, Cándido    | 26454122D |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Mando Correa, Rosa          | 11312121D |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | 21231347K |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | 32132154H |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Monforte Cid, Roldán        | 23823930D |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mosc Amuerta, Mario         | 32939393D |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 21451451V |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Topaz Illán, Carlos         | 38293923L |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------------------------+-----------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Además, si queremos restringir y limitar el número de resultados de la consulta usaremos <a
              href="https://mariadb.com/kb/en/limit/"><code>LIMIT cantidad</code></a>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
</span><span class="linenos" data-linenos="2 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">-- | CodEmp | NomEmp                      |</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- |      2 | Manrique Bacterio, Luisa    |</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        |</span>
<span class="linenos" data-linenos="8 "></span><span class="c1">-- +--------+-----------------------------+</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <div class="admonition tip">
            <p class="admonition-title">Reduciendo el tráfico</p>
            <p>En ocasiones, cuando queremos obtener una muestra de los datos, en vez de hacer una consulta
              <code>select * from ...</code> para comprobar qué datos almacena una determinada tabla, es mucho mejor
              acostumbrarse a realizar un <code>select * from ... LIMIT 10</code>. De este modo, no sobrecargamos el
              servidor ni incrementamos el trafico de datos.</p>
          </div>
          <p>Si no queremos coger los primeros elementos, podemos hacer uso <a
              href="https://mariadb.com/kb/en/limit/"><code>LIMIT inicio, cantidad</code></a>, teniendo en cuenta que
            <code>inicio</code> referencia al desplazamiento, es decir, la cantidad de filas que se ignorarán.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodEmp | NomEmp                    |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán      |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos       |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      5 | Alada Veraz, Juana        |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- 4 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Por último, podemos expresar lo mismo mediante <a
              href="https://mariadb.com/kb/en/limit/"><code>LIMIT cantidad OFFSET inicio</code></a>, sólo que cambiamos
            el orden de los parámetros:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="k">OFFSET</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodEmp | NomEmp                    |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán      |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos       |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      5 | Alada Veraz, Juana        |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- +--------+---------------------------+</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- 4 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <!--
FIXME: el mejor / crear apartado nuevo
DESEMPATES: https://mariadb.com/kb/en/select-offset-fetch/
FETCH FIRST 1 ROW WITH TIES;
-->

          <h3 id="seleccion">Selección<a class="headerlink" href="06sql.html#seleccion"
              title="Permanent link">&para;</a></h3>
          <p>La selección en SQL permite filtrar filas de una tabla en función de condiciones específicas. Esto se logra
            mediante la cláusula <code>WHERE</code>, que define los criterios de filtrado.</p>
          <p>Para filtrar los datos y realizar una selección de tuplas, podemos emplear tanto <a
              href="https://mariadb.com/kb/en/function-and-operator-reference/">funciones como operadores</a> dentro del
            <code>WHERE</code>. Para realizar las comparaciones, se expresan mediante
            <code>expresion1 operador expresion2</code>, pudiendo utilizar los operadores relacionales
            <code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>=</code>,
            <code>!=</code>, así como los operadores lógicos como <code>and</code>, <code>or</code>, <code>not</code>,
            etc...</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">FecNaEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">CodDep</span><span class="o">=</span><span class="s1">&#39;DIRGE&#39;</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+--------+------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | CodDep | FecNaEmp   |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+--------+------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | DIRGE  | 1961-08-07 |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +-----------------------------+--------+------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
<span class="linenos" data-linenos=" 8 "></span>
<span class="hll"><span class="linenos" data-linenos=" 9 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">SalEmp</span><span class="o">&lt;</span><span class="mi">2000000</span><span class="p">;</span>
</span><span class="linenos" data-linenos="10 "></span><span class="c1">-- +-------------------------+</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | NomEmp                  |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- +-------------------------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Forzado López, Galeote  |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Mascullas Alto, Eloísa  |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Mosc Amuerta, Mario     |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +-------------------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Como puede observarse, no es necesario que el o los atributos que usemos en la selección luego aparezcan en
            la proyección, ni viceversa.</p>
          <h4 id="rangos">Rangos<a class="headerlink" href="06sql.html#rangos" title="Permanent link">&para;</a></h4>
          <p>Supongamos que queremos recuperar los empleados que cobran entre uno y dos millones. Podemos hacerlo
            haciendo uso de una conjunción entre dos comparaciones:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1000000</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">2000000</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">-- | NomEmp                  | SalEmp     |</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- | Forzado López, Galeote  | 1600000.00 |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- | Mascullas Alto, Eloísa  | 1600000.00 |</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- | Mosc Amuerta, Mario     | 1300000.00 |</span>
<span class="linenos" data-linenos="8 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si el conjunto de valores a comparar forma parte de un rango numérico, es mejor utilizar <a
              href="https://mariadb.com/kb/en/between-and/"><code>BETWEEN .. AND</code></a>, siguiendo la sintaxis
            <code>expresión1 [NOT] BETWEEN expresión2 AND expresión3</code>:</p>
          <p>Así pues, la misma consulta la podemos reescribir así:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">1000000</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">2000000</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="3 "></span><span class="c1">-- | NomEmp                  | SalEmp     |</span>
<span class="linenos" data-linenos="4 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="5 "></span><span class="c1">-- | Forzado López, Galeote  | 1600000.00 |</span>
<span class="linenos" data-linenos="6 "></span><span class="c1">-- | Mascullas Alto, Eloísa  | 1600000.00 |</span>
<span class="linenos" data-linenos="7 "></span><span class="c1">-- | Mosc Amuerta, Mario     | 1300000.00 |</span>
<span class="linenos" data-linenos="8 "></span><span class="c1">-- +-------------------------+------------+</span>
<span class="linenos" data-linenos="9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>También podemos negar la cláusula o usarla con fechas:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span>
</span><span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="mi">2000000</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="mi">6000000</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +-----------------------------+------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | NomEmp                      | SalEmp     |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------------------------+------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 7200000.00 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Alada Veraz, Juana          | 6200000.00 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Forzado López, Galeote      | 1600000.00 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | 1600000.00 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Mosc Amuerta, Mario         | 1300000.00 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- +-----------------------------+------------+</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- 5 rows in set (0.000 sec)</span>
<span class="linenos" data-linenos="13 "></span>
<span class="hll"><span class="linenos" data-linenos="14 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="n">FecNaEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span>
</span><span class="hll"><span class="linenos" data-linenos="15 "></span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">FecInEmp</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="s1">&#39;1970/01/01&#39;</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="s1">&#39;1980/01/01&#39;</span><span class="p">;</span>
</span><span class="linenos" data-linenos="16 "></span><span class="c1">-- +-----------------------------+------------+------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | NomEmp                      | FecInEmp   | FecNaEmp   |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- +-----------------------------+------------+------------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 1972-07-01 | 1961-08-07 |</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- | Alada Veraz, Juana          | 1976-08-07 | 1958-03-08 |</span>
<span class="linenos" data-linenos="21 "></span><span class="c1">-- +-----------------------------+------------+------------+</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- 2 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="conjuntos">Conjuntos<a class="headerlink" href="06sql.html#conjuntos"
              title="Permanent link">&para;</a></h4>
          <p>Si en vez de un rango, queremos comprobar si el resultado de la expresión coincide con uno de entre una
            lista de valores (los cuales deben coincidir en su tipo de datos), usaremos el operador <a
              href="https://mariadb.com/kb/en/in/"><code>IN</code></a> con la sintaxis
            <code>exp1 [NOT] IN (const1 [,const2])</code></p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">Codemp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Codemp</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">7</span><span class="p">);</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+-----------------------------+------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | Codemp | NomEmp                      | SalEmp     |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------------------------+------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | 7200000.00 |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | 5200000.00 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | 6200000.00 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      7 | Forzado López, Galeote      | 1600000.00 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- +--------+-----------------------------+------------+</span>
<span class="linenos" data-linenos="10 "></span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;PROZS&#39;</span><span class="p">,</span><span class="s1">&#39;VENZS&#39;</span><span class="p">);</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +-------------------------+--------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | NomEmp                  | CodDep |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +-------------------------+--------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Forzado López, Galeote  | PROZS  |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Mascullas Alto, Eloísa  | PROZS  |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Mando Correa, Rosa      | PROZS  |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- | Mosc Amuerta, Mario     | PROZS  |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- | Monforte Cid, Roldán    | VENZS  |</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- | Topaz Illán, Carlos     | VENZS  |</span>
<span class="linenos" data-linenos="21 "></span><span class="c1">-- +-------------------------+--------+</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- 6 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="patron-texto">Patrón texto<a class="headerlink" href="06sql.html#patron-texto"
              title="Permanent link">&para;</a></h4>
          <p>Cuando tenemos campos de tipo texto, lo normal no es comparar por todo el valor exacto, sino por una
            subcadena existente. Para ello, usaremos el operador <a
              href="https://mariadb.com/kb/en/like/"><code>LIKE</code></a> acompañado de un patrón, siguiendo la
            sintaxis <code>columna [NOT] LIKE patrón</code>.</p>
          <p>En el patrón de búsqueda, podemos emplear los comodines <code>_</code> para indicar que ocupa un carácter y
            <code>%</code> para cero o más caracteres.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- Centros que acaban en Sur</span>
<span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomCen</span><span class="p">,</span><span class="w"> </span><span class="n">PobCen</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">centro</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Nomcen</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%Sur&#39;</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +-------------------+-----------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | NomCen            | PobCen    |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-------------------+-----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Fábrica Zona Sur  | Cartagena |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Oficinas Zona Sur | Cartagena |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- +-------------------+-----------+</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- 2 rows in set (0.003 sec)</span>
<span class="linenos" data-linenos="10 "></span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- Empleados cuya segunda letra del nombre sea a</span>
<span class="hll"><span class="linenos" data-linenos="12 "></span><span class="k">select</span><span class="w"> </span><span class="n">Nomemp</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Nomemp</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;_a%&#39;</span><span class="p">;</span>
</span><span class="linenos" data-linenos="13 "></span><span class="c1">-- +-----------------------------+--------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Nomemp                      | CodDep |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------------------------+--------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | DIRGE  |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | IN&amp;DI  |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | PROZS  |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- | Mando Correa, Rosa          | PROZS  |</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- +-----------------------------+--------+</span>
<span class="linenos" data-linenos="21 "></span><span class="c1">-- 4 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <div class="admonition info">
            <p class="admonition-title">Expresiones regulares</p>
            <p>Si la lógica a comprobar es más compleja, podemos hacer uso de expresiones regulares, mediante la
              cláusula <a href="https://mariadb.com/kb/en/regexp/"><code>REGEXP</code></a>. Algunos ejemplos:</p>
            <ul>
              <li>
                <p>Empleados cuyo nombre empieza por vocal (<code>^</code> comienza y entre corchetes ponemos todos los
                  posibles valores, es decir, por una vocal en mayúsculas o minúsculas)</p>
                <div class="highlight">
                  <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span>
<span class="linenos" data-linenos="2 "></span><span class="k">where</span><span class="w"> </span><span class="n">NomEmp</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">&#39;^[AEIOUaeiou]&#39;</span><span class="p">;</span>
</code></pre>
                </div>
              </li>
              <li>
                <p>Departamentos cuyo nombre contiene exactamente dos palabras (<code>^[^ ]+</code> una o más letras al
                  inicio, y <code>[^ ]+$</code> una o más letras al final)</p>
                <div class="highlight">
                  <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos="2 "></span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span>
<span class="linenos" data-linenos="3 "></span><span class="k">where</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="n">REGEXP</span><span class="w"> </span><span class="s1">&#39;^[^ ]+ [^ ]+$&#39;</span><span class="p">;</span>
</code></pre>
                </div>
              </li>
            </ul>
          </div>
          <h4 id="valor-nulo">Valor nulo<a class="headerlink" href="06sql.html#valor-nulo"
              title="Permanent link">&para;</a></h4>
          <p>Para comprobar si un campo contiene valores nulos (o si queremos saber si tiene algún valor, sea cual sea)
            usaremos el operador <a href="https://mariadb.com/kb/en/is-null/"><code>IS NULL</code></a> con la sintaxis
            <code>columna IS [NOT] NULL</code>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-------------------------+----------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                  | ExtelEmp |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-------------------------+----------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Forzado López, Galeote  | NULL     |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Mascullas Alto, Eloísa  | NULL     |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Mosc Amuerta, Mario     | NULL     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- +-------------------------+----------+</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
<span class="linenos" data-linenos="10 "></span>
<span class="hll"><span class="linenos" data-linenos="11 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</span><span class="linenos" data-linenos="12 "></span><span class="c1">-- +-----------------------------+----------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | NomEmp                      | ExtelEmp |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- +-----------------------------+----------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | 1111     |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | 2233     |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Monforte Cid, Roldán        | 2133     |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- | Topaz Illán, Carlos         | 3838     |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- | Alada Veraz, Juana          | 1239     |</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- | Gozque Altanero, Cándido    | 23838    |</span>
<span class="linenos" data-linenos="21 "></span><span class="c1">-- | Mando Correa, Rosa          | 12124    |</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- +-----------------------------+----------+</span>
</code></pre>
          </div>
          <h4 id="operadores-logicos">Operadores lógicos<a class="headerlink" href="06sql.html#operadores-logicos"
              title="Permanent link">&para;</a></h4>
          <p>Respecto a las condiciones compuestas, podemos unir operadores mediante <code>AND</code> (conjunción),
            <code>OR</code> (disyunción) y <code>NOT</code> (negación).</p>
          <div class="highlight">
            <pre><span></span><code><span class="hll"><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span>
</span><span class="hll"><span class="linenos" data-linenos=" 2 "></span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">CodDep</span><span class="o">=</span><span class="s1">&#39;ADMZS&#39;</span><span class="w"> </span><span class="k">OR</span><span class="w"> </span><span class="n">ExtelEmp</span><span class="w"> </span><span class="k">IS</span><span class="w"> </span><span class="k">NULL</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +-------------------------+--------+----------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | NomEmp                  | CodDep | ExtelEmp |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-------------------------+--------+----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Alada Veraz, Juana      | ADMZS  | 1239     |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Forzado López, Galeote  | PROZS  | NULL     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Mascullas Alto, Eloísa  | PROZS  | NULL     |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Mosc Amuerta, Mario     | PROZS  | NULL     |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- +-------------------------+--------+----------+</span>
<span class="linenos" data-linenos="11 "></span>
<span class="hll"><span class="linenos" data-linenos="12 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span>
</span><span class="hll"><span class="linenos" data-linenos="13 "></span><span class="w">    </span><span class="k">where</span><span class="w"> </span><span class="n">CodDep</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="p">(</span><span class="s1">&#39;ADMZS&#39;</span><span class="p">,</span><span class="s1">&#39;PROZS&#39;</span><span class="p">,</span><span class="s1">&#39;VENZS&#39;</span><span class="p">)</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">SalEmp</span><span class="o">&gt;</span><span class="mi">5000000</span><span class="p">;</span>
</span><span class="linenos" data-linenos="14 "></span><span class="c1">-- +-----------------------+--------+------------+</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | NomEmp                | CodDep | SalEmp     |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +-----------------------+--------+------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Alada Veraz, Juana    | ADMZS  | 6200000.00 |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- | Monforte Cid, Roldán  | VENZS  | 5200000.00 |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- +-----------------------+--------+------------+</span>
</code></pre>
          </div>
          <div class="admonition info">
            <p class="admonition-title">Prioridad de los operadores</p>
            <p>Conviene recordar la <a href="https://mariadb.com/kb/en/operator-precedence/">prioridad de los
                operadores</a> a la hora de evaluar una expresión:</p>
            <ul>
              <li>Se evalúa la multiplicación (<code>*</code>) y la división (<code>/</code>) al mismo nivel.</li>
              <li>A continuación sumas (<code>+</code>) y restas (<code>-</code>).</li>
              <li>Todas las comparaciones (<code>&lt;</code>, <code>&gt;</code>, …).</li>
              <li>Después se evalúan los operadores <code>IS NULL</code>, <code>IN</code>, <code>LIKE</code></li>
              <li><code>BETWEEN</code>...</li>
              <li><code>NOT</code>.</li>
              <li><code>AND</code>.</li>
              <li><code>OR</code>.</li>
            </ul>
          </div>
          <h2 id="uniendo-tablas">Uniendo Tablas<a class="headerlink" href="06sql.html#uniendo-tablas"
              title="Permanent link">&para;</a></h2>
          <p>Hasta ahora nos hemos dedicaod a realizar consultas sobre uno o más atributos de una determinada tabla. El
            modelo relacional se basa en la relación de una o más tablas, y por lo tanto, necesitamos de un mecanismo
            que nos permite obtener información de tablas que están relacionadas.</p>
          <p>Dicho esto, para unir varias tablas (realizar un <a
              href="https://mariadb.com/kb/en/join-syntax/"><em>join</em></a>) tenemos diferentes <a
              href="https://mariadb.com/kb/en/join-syntax/">formas</a> de hacerlo:</p>
          <ul>
            <li><em>cross join</em>: producto cartesiano entre dos tablas</li>
            <li><em>inner join</em>: une dos tablas por campos que coinciden en valor.</li>
            <li><em>natural join</em>: une dos tablas por campos que se llaman igual</li>
            <li><em>outer join</em>: une dos tablas, recuperando todos los elementos que están en una de ellas y de la
              segunda los que coinciden en valor. En este caso, podemos distinguir entre <em>left join</em> o <em>right
                join</em> dependiendo que tabla es la que aporta todos los elementos.</li>
          </ul>
          <p>En el siguiente gráfico tienes resumidas de forma visual todas las combinaciones posibles:</p>
          <figure style="align: center;">
            <img src="../images/06joins-sql.svg" width="691"
              title="Joins en SQL - De GermanX - Trabajo propio, CC BY-SA 4.0, https://commons.wikimedia.org/w/index.php?curid=55878387">
            <figcaption>Joins en SQL - De GermanX - Trabajo propio, CC BY-SA 4.0,
              https://commons.wikimedia.org/w/index.php?curid=55878387</figcaption>
          </figure>

          <p>Veamos estas operaciones en detalle.</p>
          <h3 id="producto-cartesiano">Producto cartesiano<a class="headerlink" href="06sql.html#producto-cartesiano"
              title="Permanent link">&para;</a></h3>
          <p>El producto cartesiano (<em>cross join</em>) de dos tablas son todas las combinaciones de las filas de una
            tabla unidas a las filas de la otra tabla. Es decir, cada fila de A se cruza con todas las de B.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">nomdep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">,</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | NomDep                     |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Administración Zona Sur    |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General          |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Investigación y Diseño     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Jefatura Fábrica Zona Sur  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Administración Zona Sur    |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Dirección General          |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Investigación y Diseño     |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- ...</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- Empleado: 10 registros X Departamento: 6 registros</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- Resultado: 60 registros</span>
</code></pre>
          </div>
          <p>Otra forma de expresar lo mismo es mediante <code>cross join</code>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">CROSS</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
</code></pre>
          </div>
          <h3 id="composicion-interna">Composición interna<a class="headerlink" href="06sql.html#composicion-interna"
              title="Permanent link">&para;</a></h3>
          <p>La operación <code>[INNER] JOIN</code> combina registros de dos tablas siempre que existan valores
            coincidentes en un campo común (clave ajena con clave primaria). Para ello, se indica una tabla seguida
            (opcionalmente con el prefijo <code>INNER</code>) de <code>JOIN</code> con la segunda tabla, y tras
            <code>ON</code>, igualamos la clave ajena con la primaria:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">empleado</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">departamento</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | NomEmp                      | NomDep                     |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | Alada Veraz, Juana          | Administración Zona Sur    |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General          |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Investigación y Diseño     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Gozque Altanero, Cándido    | Jefatura Fábrica Zona Sur  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Forzado López, Galeote      | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Mando Correa, Rosa          | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mosc Amuerta, Mario         | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Monforte Cid, Roldán        | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Topaz Illán, Carlos         | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 10 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>Es conveniente, y realmente más cómodo, poner un alias a las tablas (normalmente la inicial del nombre de
            la tabla tras el propio nombre de la misma):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
</code></pre>
          </div>
          <p>En versiones antiguas de SQL era más común indicar las <a
              href="https://mariadb.com/kb/en/comma-vs-join/">tablas separadas por coma</a> y realizar el <em>join</em>
            en el <code>WHERE</code>, uniendo la clave ajena con la clave primaria de la tabla a la que referencia.
            Aunque a nivel funcional el resultado es el mismo, es recomendable utilizar la sintaxis
            <code>JOIN ... ON</code> por legibilidad, y es probable, que el optimizador de consultas del SGBD funcione
            mejor:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="c1">--- SQL 86</span>
<span class="linenos" data-linenos="2 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos="3 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="p">,</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span>
<span class="linenos" data-linenos="4 "></span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span>
<span class="linenos" data-linenos="6 "></span><span class="c1">--- SQL 92</span>
<span class="linenos" data-linenos="7 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos="8 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span>
<span class="linenos" data-linenos="9 "></span><span class="w">    </span><span class="k">on</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="o">=</span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span><span class="p">;</span>
</code></pre>
          </div>
          <p>Cuando coincide el nombre de los atributos podemos emplear la cláusula <code>USING (listaDeColumnas)</code>
            para simplificar la consulta:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos="2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span>
<span class="linenos" data-linenos="3 "></span><span class="w">    </span><span class="k">USING</span><span class="w"> </span><span class="p">(</span><span class="n">CodDep</span><span class="p">);</span>
</code></pre>
          </div>
          <h4 id="natural-join">Natural join<a class="headerlink" href="06sql.html#natural-join"
              title="Permanent link">&para;</a></h4>
          <p>Forma parte del estándar SQL desde SQL:1999, y se trata de una especialización de <code>INNER JOIN</code>,
            ya que simplifica la unión entre dos tablas al basarse automáticamente en las columnas con nombres
            coincidentes en ambas tablas.</p>
          <p>La tabla resultante contiene sólo una columna por cada par de columnas con el mismo nombre.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">NATURAL</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | NomEmp                      | NomDep                     |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | Alada Veraz, Juana          | Administración Zona Sur    |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General          |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Investigación y Diseño     |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Gozque Altanero, Cándido    | Jefatura Fábrica Zona Sur  |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Forzado López, Galeote      | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mando Correa, Rosa          | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Mosc Amuerta, Mario         | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Monforte Cid, Roldán        | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Topaz Illán, Carlos         | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +-----------------------------+----------------------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 10 rows in set (0.001 sec)    </span>
</code></pre>
          </div>
          <h4 id="consultas-sobre-varias-tablas">Consultas sobre varias tablas<a class="headerlink"
              href="06sql.html#consultas-sobre-varias-tablas" title="Permanent link">&para;</a></h4>
          <p>Cuando necesitamos información que está en diferentes tablas, o necesitamos que los datos obtenidos
            dependan de las relaciones en las que participan, deberemos emparejar los campos que han de tener valores
            iguales (FKs con PKs)</p>
          <p>Algunos aspectos a tener en cuenta:</p>
          <ul>
            <li>Pueden combinarse tantas tablas como se desee.</li>
            <li>El criterio de combinación puede estar formado por más de una pareja de columnas.</li>
            <li>En la cláusula <code>SELECT</code> pueden citarse columnas de ambas tablas, coincidan o no con la
              combinación.</li>
            <li>Si hay columnas con el mismo nombre en las distintas tablas, deben identificarse especificando la tabla
              de procedencia o utilizando un alias de tabla.</li>
          </ul>
          <p>Veamos algunos ejemplos. Antes ya hemos visto cómo recuperar el nombre de los departamentos donde trabaja
            cada empleado. Si también queremos obtener el nombre del centro, necesitamos unir las tres tablas:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="p">,</span><span class="w"> </span><span class="n">NomCen</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">centro</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodCen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">CodCen</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | NomEmp                      | NomDep                     | NomCen             |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General          | Dirección General  |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Investigación y Diseño     | Dirección General  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Gozque Altanero, Cándido    | Jefatura Fábrica Zona Sur  | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Forzado López, Galeote      | Producción Zona Sur        | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | Producción Zona Sur        | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mando Correa, Rosa          | Producción Zona Sur        | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Mosc Amuerta, Mario         | Producción Zona Sur        | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Alada Veraz, Juana          | Administración Zona Sur    | Oficinas Zona Sur  |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Monforte Cid, Roldán        | Ventas Zona Sur            | Oficinas Zona Sur  |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Topaz Illán, Carlos         | Ventas Zona Sur            | Oficinas Zona Sur  |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si además, queremos el director del centro, necesitamos volver a unir con empleado para obtener su nombre:
          </p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="p">,</span><span class="w"> </span><span class="n">NomCen</span><span class="p">,</span><span class="w"> </span><span class="n">e2</span><span class="p">.</span><span class="n">NomEmp</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Director</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">centro</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodCen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">CodCen</span>
<span class="linenos" data-linenos=" 4 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">CodEmpDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">e2</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+-----------------------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | NomEmp                      | NomDep                     | NomCen             | Director                    |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+-----------------------------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | Alada Veraz, Juana          | Administración Zona Sur    | Oficinas Zona Sur  | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General          | Dirección General  | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Manrique Bacterio, Luisa    | Investigación y Diseño     | Dirección General  | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Gozque Altanero, Cándido    | Jefatura Fábrica Zona Sur  | Fábrica Zona Sur   | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Forzado López, Galeote      | Producción Zona Sur        | Fábrica Zona Sur   | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | Producción Zona Sur        | Fábrica Zona Sur   | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | Mando Correa, Rosa          | Producción Zona Sur        | Fábrica Zona Sur   | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | Mosc Amuerta, Mario         | Producción Zona Sur        | Fábrica Zona Sur   | Gozque Altanero, Cándido    |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- | Monforte Cid, Roldán        | Ventas Zona Sur            | Oficinas Zona Sur  | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- | Topaz Illán, Carlos         | Ventas Zona Sur            | Oficinas Zona Sur  | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- +-----------------------------+----------------------------+--------------------+-----------------------------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 10 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>En todo momento, podemos añadir filtros sobre una composición. Por ejemplo, recuperaremos los nombres de
            los empleados, departamentos en los que trabaja y sus centros, de aquellos empleados y que tienen al menos
            un hijo y cuyo departamento tenga un presupuesto superior a 20000000:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">NomDep</span><span class="p">,</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">NomCen</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodDep</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">centro</span><span class="w"> </span><span class="k">c</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">CodCen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">c</span><span class="p">.</span><span class="n">CodCen</span>
<span class="linenos" data-linenos=" 4 "></span><span class="k">where</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NumHi</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="k">and</span>
<span class="linenos" data-linenos=" 5 "></span><span class="w">    </span><span class="n">d</span><span class="p">.</span><span class="n">PreAnu</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20000000</span>
<span class="linenos" data-linenos=" 6 "></span><span class="k">order</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +-----------------------------+----------------------+--------------------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | NomEmp                      | NomDep               | NomCen             |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- +-----------------------------+----------------------+--------------------+</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | Saladino Mandamás, Augusto  | Dirección General    | Dirección General  |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | Mascullas Alto, Eloísa      | Producción Zona Sur  | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | Mando Correa, Rosa          | Producción Zona Sur  | Fábrica Zona Sur   |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- +-----------------------------+----------------------+--------------------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="composicion-reflexiva">Composición reflexiva<a class="headerlink"
              href="06sql.html#composicion-reflexiva" title="Permanent link">&para;</a></h4>
          <p>Cuando tenemos una relación reflexiva de una tabla consigo misma, para obtener los datos, hemos de realizar
            una join de la tabla con otra instancia de sí misma.</p>
          <p>Por ejemplo, en la tabla <code>departamento</code>, la columna <code>CodDepDep</code> referenciar al
            departamento del que depende; aquellos que tenga como valor <code>NULL</code>, no dependen de ninguno y
            podríamos decir que son departamentos principales.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodDep</span><span class="p">,</span><span class="w"> </span><span class="n">CodDepDep</span><span class="p">,</span><span class="w"> </span><span class="n">NomDep</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span><span class="p">;</span>
<span class="linenos" data-linenos=" 2 "></span><span class="c1">-- +--------+-----------+----------------------------+</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- | CodDep | CodDepDep | NomDep                     |</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------+----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | ADMZS  | NULL      | Administración Zona Sur    |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | DIRGE  | NULL      | Dirección General          |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | IN&amp;DI  | DIRGE     | Investigación y Diseño     |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | JEFZS  | NULL      | Jefatura Fábrica Zona Sur  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | PROZS  | JEFZS     | Producción Zona Sur        |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | VENZS  | ADMZS     | Ventas Zona Sur            |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- +--------+-----------+----------------------------+</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- 6 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Así pues, si queremos recuperar todos los departamentos secundarios, así como el código y nombre de su
            departamento principal necesitamos referencias a la tabla <code>departamento</code> mediante un
            <em>join</em> consigo misma. Para ello, es imperativo utilizar un alias descriptivo para identificar el rol
            de la tabla en cada caso (en nuestro caso, <code>sec</code> como departamento secundario y <code>prin</code>
            para los principales):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">sec</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">CodDepSec</span><span class="p">,</span><span class="w"> </span><span class="n">sec</span><span class="p">.</span><span class="n">NomDep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NomDepSec</span><span class="p">,</span><span class="w"> </span><span class="n">prin</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">CodDepPrin</span><span class="p">,</span><span class="w"> </span><span class="n">prin</span><span class="p">.</span><span class="n">NomDep</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">NomDepPrin</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">prin</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="n">sec</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">prin</span><span class="p">.</span><span class="n">CodDep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sec</span><span class="p">.</span><span class="n">CodDepDep</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +-----------+--------------------------+------------+----------------------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodDepSec | NomDepSec                | CodDepPrin | NomDepPrin                 |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------+--------------------------+------------+----------------------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | IN&amp;DI     | Investigación y Diseño   | DIRGE      | Dirección General          |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | PROZS     | Producción Zona Sur      | JEFZS      | Jefatura Fábrica Zona Sur  |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | VENZS     | Ventas Zona Sur          | ADMZS      | Administración Zona Sur    |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- +-----------+--------------------------+------------+----------------------------+</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- 3 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h3 id="composicion-externa">Composición externa<a class="headerlink" href="06sql.html#composicion-externa"
              title="Permanent link">&para;</a></h3>
          <p>Cuando efectuamos una combinación interna los registros que se quedan sin emparejar en la otra tabla no
            aparecen en el resultado.</p>
          <p>En ocasiones no queremos únicamente los registros que están conectados, sino que nos interesa recuperarlos
            todos (conectados y no conectados) y de los conectados, sus datos. En otras ocasiones, queremos recuperar
            todos los que no están conectados... Para ello, necesitamos hacer uso de las composiciones externas.</p>
          <p>Mediante una combinación externa, aparecerán los datos emparejados más los que no están relacionados, ya
            sea por la:</p>
          <ul>
            <li>Izquierda: <code>LEFT [OUTER] JOIN</code> – Todos los de la tabla de la izquierda, y de la derecha los
              relacionados.</li>
            <li>Derecha: <code>RIGHT [OUTER] JOIN</code> – Los de la izquierda los relacionados, y de la derecha todos
              los datos.</li>
          </ul>
          <p>Veamos con un ejemplo qué datos obtenemos. Primero realizamos un <em>join</em> entre empleados y sus
            habilidades para obtener los empleados que tienen habilidades (obtenemos 6 registros porque tenemos clientes
            que tienen más de una habilidad, pero no todos los clientes tienen habilidades):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- 6 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>Si en cambio queremos recuperar todos los empleados, y si tienen habilidades, su información, haríamos un
            <em>left join</em>. Ahora se muestran todos los empleados, y además, aquel que tenga habilidades, aparecerá
            tantas veces como habilidades tenga. En cambio, de los que no tienen habilidades aparecerá <code>NULL</code>
            en las columnas correspondientes:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 |</span>
<span class="hll"><span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      2 | Manrique Bacterio, Luisa    | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 |</span>
<span class="hll"><span class="linenos" data-linenos="10 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos         | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="11 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 |</span>
<span class="hll"><span class="linenos" data-linenos="13 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido    | NULL   |   NULL |   NULL |</span>
</span><span class="hll"><span class="linenos" data-linenos="14 "></span><span class="c1">-- |      7 | Forzado López, Galeote      | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="15 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 |</span>
<span class="hll"><span class="linenos" data-linenos="16 "></span><span class="c1">-- |      9 | Mando Correa, Rosa          | NULL   |   NULL |   NULL |</span>
</span><span class="hll"><span class="linenos" data-linenos="17 "></span><span class="c1">-- |     10 | Mosc Amuerta, Mario         | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="18 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 12 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si cambiamos la consulta y hacemos un <em>right</em> join, recuperaremos la misma información que con un
            <em>inner join</em> ya que en la tabla <code>habemp</code> no podemos tener registros que no referencien a
            empleados existentes, por la propia definición de integridad referencial.</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- 6 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>No obstante, si cambiamos el orden de las tablas en el <em>join</em>, sí que tiene sentido hacer un
            <em>right join</em>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodHab | CodEmp | NivHab | CodEmp | NomEmp                      |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | GEREN  |      1 |     10 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | RELPU  |      1 |      9 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="hll"><span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | NULL   |   NULL |   NULL |      2 | Manrique Bacterio, Luisa    |</span>
</span><span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | MARKE  |      3 |      9 |      3 | Monforte Cid, Roldán        |</span>
<span class="hll"><span class="linenos" data-linenos="10 "></span><span class="c1">-- | NULL   |   NULL |   NULL |      4 | Topaz Illán, Carlos         |</span>
</span><span class="linenos" data-linenos="11 "></span><span class="c1">-- | GESCO  |      5 |      9 |      5 | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | RELPU  |      5 |      8 |      5 | Alada Veraz, Juana          |</span>
<span class="hll"><span class="linenos" data-linenos="13 "></span><span class="c1">-- | NULL   |   NULL |   NULL |      6 | Gozque Altanero, Cándido    |</span>
</span><span class="hll"><span class="linenos" data-linenos="14 "></span><span class="c1">-- | NULL   |   NULL |   NULL |      7 | Forzado López, Galeote      |</span>
</span><span class="linenos" data-linenos="15 "></span><span class="c1">-- | FONTA  |      8 |      7 |      8 | Mascullas Alto, Eloísa      |</span>
<span class="hll"><span class="linenos" data-linenos="16 "></span><span class="c1">-- | NULL   |   NULL |   NULL |      9 | Mando Correa, Rosa          |</span>
</span><span class="hll"><span class="linenos" data-linenos="17 "></span><span class="c1">-- | NULL   |   NULL |   NULL |     10 | Mosc Amuerta, Mario         |</span>
</span><span class="linenos" data-linenos="18 "></span><span class="c1">-- +--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 12 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>¿Y si tenemos tres tablas? Vamos a unir las habilidades de los empleados con todas las existentes (seguimos
            recuperando los mismos 6 registros, sólo que ahora tenemos acceso a los nombres de las habilidades):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodHab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">CodHab</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab | CodHab | DesHab               |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 | GEREN  | Gerencia             |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 | MARKE  | Marketing            |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 | GESCO  | Gestión Contable     |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 | FONTA  | Fontanería           |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- 6 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Si quiero recuperar todos los empleados y el nombre de la habilidad si la tienen, tenemos que hacer un
            <em>left join</em>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodHab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">CodHab</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab | CodHab | DesHab               |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 | GEREN  | Gerencia             |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 | MARKE  | Marketing            |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 | GESCO  | Gestión Contable     |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 | FONTA  | Fontanería           |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- 6 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>¿Qué ha pasado? ¿Por qué sólo 6 registros? Al realizar el segundo <em>join</em>, ha eliminado aquellos
            registros que tienen la habilidad nula.</p>
          <p>Pero ¿cómo lo solucionamos? Primero vamos a unir los códigos y habilidades, y luego hacemos el
            <em>join</em> por la derecha con todos los empleados:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodHab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">CodHab</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab | CodHab | DesHab               |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 | GEREN  | Gerencia             |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      2 | Manrique Bacterio, Luisa    | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 | MARKE  | Marketing            |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos         | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 | GESCO  | Gestión Contable     |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 | RELPU  | Relaciones Públicas  |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido    | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- |      7 | Forzado López, Galeote      | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 | FONTA  | Fontanería           |</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- |      9 | Mando Correa, Rosa          | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- |     10 | Mosc Amuerta, Mario         | NULL   |   NULL |   NULL | NULL   | NULL                 |</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+--------+----------------------+</span>
<span class="linenos" data-linenos="20 "></span><span class="c1">-- 12 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Veamos otro ejemplo. Ahora quiero recuperar todas las habilidades, y si lo hay, el empleado que la tiene.
            En este caso, pongo a la izquierda las habilidades y hago dos <em>left joins</em>:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodHab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">CodHab</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodHab | DesHab               | CodHab | CodEmp | NivHab | CodEmp | NomEmp                      |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | FONTA  | Fontanería           | FONTA  |      8 |      7 |      8 | Mascullas Alto, Eloísa      |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | GEREN  | Gerencia             | GEREN  |      1 |     10 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | GESCO  | Gestión Contable     | GESCO  |      5 |      9 |      5 | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | INFOR  | INFORMATICA          | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | MARKE  | Marketing            | MARKE  |      3 |      9 |      3 | Monforte Cid, Roldán        |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | MECAN  | Mecanografía         | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | RELPU  | Relaciones Públicas  | RELPU  |      1 |      9 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | RELPU  | Relaciones Públicas  | RELPU  |      5 |      8 |      5 | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | TELEF  | Telefonista          | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 9 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>La misma consulta con sólo una consulta externa sería:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span>
<span class="linenos" data-linenos=" 3 "></span><span class="w">    </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodHab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">h</span><span class="p">.</span><span class="n">CodHab</span><span class="p">;</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodHab | DesHab               | CodHab | CodEmp | NivHab | CodEmp | NomEmp                      |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- | FONTA  | Fontanería           | FONTA  |      8 |      7 |      8 | Mascullas Alto, Eloísa      |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- | GEREN  | Gerencia             | GEREN  |      1 |     10 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- | GESCO  | Gestión Contable     | GESCO  |      5 |      9 |      5 | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- | INFOR  | INFORMATICA          | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- | MARKE  | Marketing            | MARKE  |      3 |      9 |      3 | Monforte Cid, Roldán        |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- | MECAN  | Mecanografía         | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- | RELPU  | Relaciones Públicas  | RELPU  |      1 |      9 |      1 | Saladino Mandamás, Augusto  |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- | RELPU  | Relaciones Públicas  | RELPU  |      5 |      8 |      5 | Alada Veraz, Juana          |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- | TELEF  | Telefonista          | NULL   |   NULL |   NULL |   NULL | NULL                        |</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- +--------+----------------------+--------+--------+--------+--------+-----------------------------+</span>
<span class="linenos" data-linenos="17 "></span><span class="c1">-- 9 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <h4 id="antijoin">Antijoin<a class="headerlink" href="06sql.html#antijoin" title="Permanent link">&para;</a>
          </h4>
          <p>Se conoce como <em>antijoin</em> los registros obtenidos de una tabla que no se combinan con otra. Es
            decir, son los registros que no se seleccionan al realizar un <em>inner join</em>, y de ahí el prefijo
            <em>anti</em>.</p>
          <p>Para aprender su uso, vamos a recuperar los empleados que no tienen habilidades:</p>
          <figure style="align: center;">
            <img src="../images/06antijoin.png" width="404" title="Antijoin entre empleados y habilidades">
            <figcaption>Antijoin entre empleados y habilidades</figcaption>
          </figure>

          <p>Pero antes, volvamos al ejemplo anterior donde obteníamos los empleados que tienen habilidades:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- 6 rows in set (0.001 sec)</span>
</code></pre>
          </div>
          <p>¿Y cómo hago para obtener los empleados que no tienen habilidades? Si realizamos un <em>join</em> por la
            izquierda, sí que aparecerán los empleados que no las tienen (además de los que las tienen):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">;</span>
<span class="linenos" data-linenos=" 3 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 4 "></span><span class="c1">-- | CodEmp | NomEmp                      | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | GEREN  |      1 |     10 |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      1 | Saladino Mandamás, Augusto  | RELPU  |      1 |      9 |</span>
<span class="hll"><span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      2 | Manrique Bacterio, Luisa    | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      3 | Monforte Cid, Roldán        | MARKE  |      3 |      9 |</span>
<span class="hll"><span class="linenos" data-linenos="10 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos         | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="11 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | GESCO  |      5 |      9 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |      5 | Alada Veraz, Juana          | RELPU  |      5 |      8 |</span>
<span class="hll"><span class="linenos" data-linenos="13 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido    | NULL   |   NULL |   NULL |</span>
</span><span class="hll"><span class="linenos" data-linenos="14 "></span><span class="c1">-- |      7 | Forzado López, Galeote      | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="15 "></span><span class="c1">-- |      8 | Mascullas Alto, Eloísa      | FONTA  |      8 |      7 |</span>
<span class="hll"><span class="linenos" data-linenos="16 "></span><span class="c1">-- |      9 | Mando Correa, Rosa          | NULL   |   NULL |   NULL |</span>
</span><span class="hll"><span class="linenos" data-linenos="17 "></span><span class="c1">-- |     10 | Mosc Amuerta, Mario         | NULL   |   NULL |   NULL |</span>
</span><span class="linenos" data-linenos="18 "></span><span class="c1">-- +--------+-----------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="19 "></span><span class="c1">-- 12 rows in set (0.000 sec)</span>
</code></pre>
          </div>
          <p>Así pues, si sobre el <em>left join</em>, nos quedamos con los que tienen la clave primaria referenciada
            nula, obtendremos justo los empleados que no tienen habilidades (operación que se conoce como
            <em>anti-join</em>):</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="k">select</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="o">*</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="n">e</span><span class="w"> </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">habemp</span><span class="w"> </span><span class="n">he</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">e</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span>
<span class="hll"><span class="linenos" data-linenos=" 3 "></span><span class="k">where</span><span class="w"> </span><span class="n">he</span><span class="p">.</span><span class="n">CodEmp</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="p">;</span>
</span><span class="linenos" data-linenos=" 4 "></span><span class="c1">-- +--------+---------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- | CodEmp | NomEmp                    | CodHab | CodEmp | NivHab |</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- +--------+---------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- |      2 | Manrique Bacterio, Luisa  | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |      4 | Topaz Illán, Carlos       | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |      6 | Gozque Altanero, Cándido  | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |      7 | Forzado López, Galeote    | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |      9 | Mando Correa, Rosa        | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |     10 | Mosc Amuerta, Mario       | NULL   |   NULL |   NULL |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- +--------+---------------------------+--------+--------+--------+</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- 6 rows in set (0.003 sec)</span>
</code></pre>
          </div>
          <h4 id="full-outer-join">Full Outer Join<a class="headerlink" href="06sql.html#full-outer-join"
              title="Permanent link">&para;</a></h4>
          <p>Aunque no está soportado por <em>MariaDB</em>, conviene conocer la combinación externa completa, aunque su
            uso es muy limitado (por la propia restricción de integridad referencial). Su resultado presenta los
            resultados de la tabla de la izquierda y de la tabla de la derecha aunque no tengan correspondencia en la
            otra tabla.</p>
          <p>Es decir, la tabla combinada contendrá entonces todos los registros de ambas tablas y presentará valores
            nulos para registros sin pareja.</p>
          <p>Si necesitamos dicho resultado, podemos simularlo haciendo una unión entre un <em>left join</em> y un
            <em>right join</em>. De esta manera obtendríamos todos los registros de T1 y los valores de T2 relacionados
            o nulos en los que no, y en una segunda consulta, los valores de T1 relacionados o nulos en los que no, y
            todos los valores de T2:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span>
<span class="linenos" data-linenos="2 "></span><span class="w">    </span><span class="k">LEFT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span>
<span class="linenos" data-linenos="3 "></span><span class="k">UNION</span>
<span class="linenos" data-linenos="4 "></span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">t1</span>
<span class="linenos" data-linenos="5 "></span><span class="w">    </span><span class="k">RIGHT</span><span class="w"> </span><span class="k">JOIN</span><span class="w"> </span><span class="n">t2</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="n">t1</span><span class="p">.</span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">t2</span><span class="p">.</span><span class="n">id</span>
</code></pre>
          </div>
          <h2 id="operadores-de-conjuntos">Operadores de conjuntos<a class="headerlink"
              href="06sql.html#operadores-de-conjuntos" title="Permanent link">&para;</a></h2>
          <p>Los operadores de conjuntos no operan sobre tipos de datos simples, sino sobre los resultados de dos o más
            consultas, las cuales deben tener la misma estructura, es decir, que la cantidad y los tipos de datos deben
            ser los mismos.</p>
          <p>Los operadores de conjuntos son:</p>
          <ul>
            <li><a href="https://mariadb.com/kb/en/union/"><code>UNION</code></a>: Devuelve el conjunto de filas
              resultante de la unión de las dos consultas, sin duplicados.</li>
            <li><code>UNION ALL</code>: Devuelve el conjunto de filas resultante de la unión de las dos consultas,
              incluyendo los duplicados.</li>
            <li><a href="https://mariadb.com/kb/en/intersect/"><code>INTERSECT</code></a>: Devuelve la intersección
              entre los dos conjuntos de filas.</li>
            <li><a href="https://mariadb.com/kb/en/except/"><code>EXCEPT</code></a>: Devuelve todas aquellas filas de la
              primera consulta que no estén en la segunda.</li>
          </ul>
          <figure style="align: center;">
            <img src="../images/06union.png" width="752" title="Operadores de conjuntos">
            <figcaption>Operadores de conjuntos -
              https://jsmshaktisingh.medium.com/set-theory-for-sql-joins-9739b6943eb3</figcaption>
          </figure>

          <p>Veamos unos ejemplos sobre empleados y directivos:</p>
          <div class="highlight">
            <pre><span></span><code><span class="linenos" data-linenos=" 1 "></span><span class="c1">-- directivos y empleados con hijos</span>
<span class="linenos" data-linenos=" 2 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmpDir</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span>
<span class="hll"><span class="linenos" data-linenos=" 3 "></span><span class="k">UNION</span>
</span><span class="linenos" data-linenos=" 4 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">NumHi</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos" data-linenos=" 5 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos=" 6 "></span><span class="c1">-- | CodEmpDir |</span>
<span class="linenos" data-linenos=" 7 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos=" 8 "></span><span class="c1">-- |         1 |</span>
<span class="linenos" data-linenos=" 9 "></span><span class="c1">-- |         2 |</span>
<span class="linenos" data-linenos="10 "></span><span class="c1">-- |         3 |</span>
<span class="linenos" data-linenos="11 "></span><span class="c1">-- |         5 |</span>
<span class="linenos" data-linenos="12 "></span><span class="c1">-- |         6 |</span>
<span class="linenos" data-linenos="13 "></span><span class="c1">-- |         9 |</span>
<span class="linenos" data-linenos="14 "></span><span class="c1">-- |         8 |</span>
<span class="linenos" data-linenos="15 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="16 "></span><span class="c1">-- 7 rows in set (0.001 sec)</span>
<span class="linenos" data-linenos="17 "></span>
<span class="linenos" data-linenos="18 "></span><span class="c1">-- directivos que tienen hijos</span>
<span class="linenos" data-linenos="19 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmpDir</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span>
<span class="hll"><span class="linenos" data-linenos="20 "></span><span class="k">INTERSECT</span>
</span><span class="linenos" data-linenos="21 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">NumHi</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos" data-linenos="22 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="23 "></span><span class="c1">-- | CodEmpDir |</span>
<span class="linenos" data-linenos="24 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="25 "></span><span class="c1">-- |         1 |</span>
<span class="linenos" data-linenos="26 "></span><span class="c1">-- |         3 |</span>
<span class="linenos" data-linenos="27 "></span><span class="c1">-- |         5 |</span>
<span class="linenos" data-linenos="28 "></span><span class="c1">-- |         6 |</span>
<span class="linenos" data-linenos="29 "></span><span class="c1">-- |         9 |</span>
<span class="linenos" data-linenos="30 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="31 "></span><span class="c1">-- 5 rows in set (0.000 sec)</span>
<span class="linenos" data-linenos="32 "></span>
<span class="linenos" data-linenos="33 "></span><span class="c1">-- directivos que no tienen hijos</span>
<span class="linenos" data-linenos="34 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmpDir</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">departamento</span>
<span class="hll"><span class="linenos" data-linenos="35 "></span><span class="k">EXCEPT</span>
</span><span class="linenos" data-linenos="36 "></span><span class="k">select</span><span class="w"> </span><span class="n">CodEmp</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">NumHi</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos" data-linenos="37 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="38 "></span><span class="c1">-- | CodEmpDir |</span>
<span class="linenos" data-linenos="39 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="40 "></span><span class="c1">-- |         2 |</span>
<span class="linenos" data-linenos="41 "></span><span class="c1">-- +-----------+</span>
<span class="linenos" data-linenos="42 "></span><span class="c1">-- 1 row in set (0.000 sec)</span>
</code></pre>
          </div>
          <div class="admonition question">
            <p class="admonition-title">Autoevaluación</p>
            <p>¿Qué puedes deducir de los empleados 4 y 7?</p>
          </div>
          <h2 id="referencias">Referencias<a class="headerlink" href="06sql.html#referencias"
              title="Permanent link">&para;</a></h2>
          <ul>
            <li>
              <p>Sintaxis SQL oficial de <a
                  href="https://www.postgresql.org/docs/current/sql-commands.html">PostgreSQL</a> y <a
                  href="https://mariadb.com/kb/en/sql-statements/">MariaDB</a>.</p>
            </li>
            <li>
              <p><em>Cheatsheets</em> de <a href="https://learnsql.com/">https://learnsql.com/</a> sobre:</p>
              <ul>
                <li><a href="https://learnsql.com/blog/sql-basics-cheat-sheet/sql-basics-cheat-sheet-a4.pdf">SQL
                    Básico</a></li>
                <li><a
                    href="https://learnsql.com/blog/standard-sql-functions-cheat-sheet/standard-sql-functions-cheat-sheet-a4.pdf">Funciones
                    SQL</a></li>
                <li><a href="https://learnsql.com/blog/sql-join-cheat-sheet/joins-cheat-sheet-a4.pdf"><em>Joins</em>
                    SQL</a></li>
              </ul>
            </li>
            <li>
              <p>Materiales sobre el módulo de BD:</p>
              <ul>
                <li><em>Consultes de selecció <a
                      href="https://ioc.xtec.cat/materials/FP/Recursos/fp_dam_m02_/web/fp_dam_m02_htmlindex/WebContent/u4/a1/continguts.html">simple</a>
                    i <a
                      href="https://ioc.xtec.cat/materials/FP/Recursos/fp_dam_m02_/web/fp_dam_m02_htmlindex/WebContent/u4/a2/continguts.html">complexes</a>
                    - Institut Obert de Catalunya</em>.</li>
                <li>Consultas <a href="https://josejuansanchez.org/bd/unidad-05-teoria/index.html">sobre una tabla</a>,
                  sobre <a href="https://josejuansanchez.org/bd/unidad-06-teoria/index.html">varias tablas con
                    composición interna</a>, y con <a
                    href="https://josejuansanchez.org/bd/unidad-07-teoria/index.html">varias tablas con composición
                    externa</a> de <em>José Juan Sánchez</em>.</li>
                <li><a href="https://jorgesanchez.net/manuales/sql/intro-sql-sql2016.html">Introducción a SQL</a> y <a
                    href="https://jorgesanchez.net/manuales/sql/select-join-sql2016.html">Consultas sobre varias tablas.
                    Cláusula join</a> de <em>Jorge Sánchez</em>.</li>
                <li><a href="https://apuntes-daw.javiergutierrez.trade/bases-de-datos/ut4/recopila.html">Realización de
                    consultas</a> de <em>Javier Gutiérrez</em>.</li>
                <li><a href="https://gestionbasesdatos.readthedocs.io/es/latest/Tema4/index.html">Consulta de bases de
                    datos</a> de gestionbasesdatos.readthedocs.io</li>
                <li><a href="https://www.cs.us.es/cursos/bd-2023/temas/BD-Tema-5.pdf">Introducción a SQL</a>, por
                  <em>Luis Valencia</em> y <em>David Orellana</em>, de la <em>Universidad de Sevilla</em>.</li>
              </ul>
            </li>
          </ul>
          <h2 id="actividades">Actividades<a class="headerlink" href="06sql.html#actividades"
              title="Permanent link">&para;</a></h2>
          <p><a name="AC601"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC601</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
                <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Una vez cargada la
                base de datos de <code>empresa</code> utilizada en los <a href="06sql.html#consultas-sql">apuntes</a>,
                tras comprobar la estructura de las tablas <code>empleado</code> y <code>departamento</code>, se pide
                realizar las siguientes consultas:</p>
              <ol>
                <li>Lista el nombre de todos los departamentos que hay en la tabla <code>departamento</code>.</li>
                <li>Lista los nombres y los presupuestos de todos los departamentos.</li>
                <li>Lista todas las columnas de la tabla <code>departamento</code>.</li>
                <li>Lista el nombre de los empleados junto con su salario.</li>
                <li>Recupera todas las posibilidades de número de hijos que tienen los empleados (debes recuperar 0, 1 y
                  2).</li>
                <li>Lista el nombre y el complemento familiar (= salario * nº hijos * 4 /100) de todos los empleados.
                </li>
                <li>Lista el nombre de los departamentos, el presupuesto en euros y también en dólares estadounidenses
                  (USD).</li>
                <li>A partir de la consulta anterior, utiliza los siguientes alias para las columnas: nombre de
                  departamento, euros, dólares.</li>
              </ol>
            </li>
          </ul>
          <p><a name="AC602"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC602</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
                <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Sobre la base de
                datos <code>empresa</code>, y haciendo uso de funciones, realiza las siguientes consultas:</p>
              <ol>
                <li>Lista los nombres y sus presupuestos de todos los departamentos de la tabla
                  <code>departamento</code>, convirtiendo los nombres a mayúscula.</li>
                <li>Lista los nombres y los salarios de todos los empleados, convirtiendo los nombres a minúsculas.</li>
                <li>Lista el nombre de todos los empleados en una columna, y en otra columna recupera en mayúsculas los
                  dos primeros caracteres del código del departamento.</li>
                <li>Lista el código del empleado y del departamento de todos los empleados, así como un código formado
                  por los datos de estos campos unidos más la extensión telefónica (si no tienen teléfono, cambiar por
                  <code>XXXX</code>).</li>
                <li>Lista el nombre de los empleados, así como un campo para su nombre y otro para sus apellidos (puedes
                  utilizar las funciones <a
                    href="https://mariadb.com/kb/en/locate/"><code>LOCATE(subcadena, cadena)</code></a> y <a
                    href="https://mariadb.com/kb/en/substring/"><code>SUBSTRING(cadena, posición [,longitud])</code></a>)
                </li>
                <li>Lista los nombres, el salario y el salario incrementado un 12%, redondeando el salario incrementado.
                </li>
                <li>Lista los nombres, el salario y el salario incrementado un 12%, truncando el salario incrementado
                  con un único decimal.</li>
                <li>Muestra el nombre de los empleados, la cantidad de hijos que tiene, y el tipo de familia, mostrando
                  <code>Sin familia</code> si no tiene hijos, <code>Ordinaria</code> si sólo tiene un hijo,
                  <code>Semi-numerosa</code> si tiene 2 hijos y <code>Numerosa</code> si tiene 3 o más hijos.</li>
              </ol>
            </li>
          </ul>
          <!--
Añadir alguna consulta que realice algún cálculo agregado
-->

          <p><a name="AC603"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC603</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Sobre la base de
                datos <code>empresa</code>, realiza las siguientes consultas:</p>
              <ol>
                <li>Lista, para cada empleado, además de su nombre, en campos separados, el día, el mes y el año de
                  cuando nació.</li>
                <li>Listado de empleados, con su nombre, fecha de nacimiento y edad.</li>
                <li>Para cada empleado, necesitamos su nombre, fecha de incorporación y días de vacaciones extra (por
                  cada 4 años en la empresa, tiene un día extra)</li>
                <li>Crea un listado con el nombre de los departamentos, así como un nuevo código formado por el código
                  del departamento, un número aleatorio de dos cifras y el código del centro.</li>
                <li>Listado del tipo de director, código, nombre y presupuesto de los departamentos ordenado por tipo de
                  director (orden alfabético) y dentro de este criterio por presupuesto anual en orden ascendente.</li>
                <li>Listado del nombre y salario de los empleados (con dos decimales y separadores de miles) ordenado
                  por criterio descendente del salario.</li>
                <li>Lista los tres departamentos ordenados por presupuesto anual y por el código del centro con menor
                  presupuesto.</li>
                <li>Recupera el empleado que más cobra.</li>
              </ol>
            </li>
          </ul>
          <p><a name="AR604"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="M13 3c3.88 0 7 3.14 7 7 0 2.8-1.63 5.19-4 6.31V21H9v-3H8c-1.11 0-2-.89-2-2v-3H4.5c-.42 0-.66-.5-.42-.81L6 9.66A7.003 7.003 0 0 1 13 3m-2.68 4.39h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91-.2.26-.31.68-.31 1.18h2c0-.31.04-.56.13-.74.09-.19.26-.36.51-.52.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82-.53-.45-1.26-.68-2.19-.68-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77zM12 14h2v-2h-2zm1-13C8.41 1 4.61 4.42 4.06 8.9L2.5 11h-.03l-.02.03c-.55.76-.62 1.76-.19 2.59.36.69 1 1.17 1.74 1.32V16c0 1.85 1.28 3.42 3 3.87V23h11v-5.5c2.5-1.67 4-4.44 4-7.5 0-4.97-4.04-9-9-9" />
                </svg></span> <strong>AR604</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Realiza las
              consultas de la 1 a la 19 del apartado 1.1.3 de <em>Consultas sobre una tabla</em> de la base de datos de
              <em>Tienda de informática</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="AP605"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="m15.1 1.81-2.83 2.83c-.77.78-.77 2.05 0 2.83l1.41 1.41-4.55 4.55-2.82-2.83L4.89 12c-4.95 5-1.39 8.5-1.39 8.5S7 24 12 19.09l1.41-1.41-2.8-2.8 4.54-4.54 1.39 1.39c.78.77 2.05.77 2.83 0L22.2 8.9zm2.83 8.47L16.55 8.9l-1.44-1.44-1.4-1.4 1.41-1.41 4.23 4.23z" />
                </svg></span> <strong>AP605</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Realiza las
              consultas de la 1 a la 20 del apartado 1.2.3 de <em>Consultas sobre una tabla</em> de la base de datos de
              <em>Gestión de empleados</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="AC606"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC606</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Sobre la base de
                datos <code>empresa</code>, realiza las siguientes consultas:</p>
              <ol>
                <li>Recupera el nombre del empleado, salario y número de hijos del empleado con código <code>1</code>.
                </li>
                <li>Listar sin repeticiones el código de todos los departamentos que tengan trabajadores incorporados
                  antes del <code>1/1/92</code>. </li>
                <li>Listar el nombre de los trabajadores que no tienen extensión telefónica.</li>
                <li>Listar el nombre y presupuesto de los departamentos no ubicados en los centros con código
                  <code>DIGE</code> o <code>FAZS</code>.</li>
                <li>Listar el nombre y salario de los trabajadores que ganen menos de 2 o más de 5 millones de euros.
                </li>
                <li>Listar el código y nombre de los empleados cuyo código sea distinto de <code>1</code>,
                  <code>4</code>, <code>6</code>, <code>8</code> y de <code>10</code>.</li>
                <li>Listar el nombre y fecha de nacimiento de los hijos de empleado que tengan como parte de su nombre o
                  apellidos la secuencia de letras <code>León</code>.</li>
                <li>Listar el nombre y salario anual de los empleados que ganan menos de 4 millones pero que ingresaron
                  en la empresa antes de 1985.</li>
                <li>
                  <p>Listar el nombre y NIF de los empleados que tienen un NIF con la letra <code>D</code> o
                    <code>V</code>, y que:</p>
                  <p>a) Trabajan en los departamentos <code>IN&amp;DI</code> o <code>DIRGE</code> y ganan más de 5
                    millones; o<br />
                    b) Fueron contratados en 1994.</p>
                </li>
              </ol>
            </li>
          </ul>
          <p><a name="AC607"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC607</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Explica qué
                recuperan las siguientes consultas (en lenguaje natural, no leyendo la consulta):</p>
              <div class="highlight">
                <pre><span></span><code><span class="linenos" data-linenos="1 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">ROUND</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">SalEmp</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2500000</span><span class="p">;</span>
<span class="linenos" data-linenos="2 "></span><span class="k">SELECT</span><span class="w"> </span><span class="k">SUM</span><span class="p">(</span><span class="n">NumHij</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">hijo</span><span class="p">;</span>
<span class="linenos" data-linenos="3 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CodHab</span><span class="p">,</span><span class="w"> </span><span class="n">DesHab</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="k">LOWER</span><span class="p">(</span><span class="n">DesHab</span><span class="p">)</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;%gestión%&#39;</span><span class="p">;</span>
<span class="linenos" data-linenos="4 "></span><span class="k">SELECT</span><span class="w"> </span><span class="k">AVG</span><span class="p">(</span><span class="n">SalEmp</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">NumHi</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos" data-linenos="5 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="k">YEAR</span><span class="p">,</span><span class="w"> </span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">())</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">empleado</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">TIMESTAMPDIFF</span><span class="p">(</span><span class="k">YEAR</span><span class="p">,</span><span class="w"> </span><span class="n">FecInEmp</span><span class="p">,</span><span class="w"> </span><span class="n">CURDATE</span><span class="p">())</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">25</span><span class="p">;</span>
<span class="linenos" data-linenos="6 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CodCen</span><span class="p">,</span><span class="w"> </span><span class="n">NomCen</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">centro</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">PobCen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">&quot;Elche&quot;</span><span class="w"> </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">NomCen</span><span class="w"> </span><span class="k">DESC</span><span class="p">;</span>
<span class="linenos" data-linenos="7 "></span><span class="k">SELECT</span><span class="w"> </span><span class="k">COUNT</span><span class="p">(</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">departamento</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">PreAnu</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">20000000</span><span class="p">;</span>
<span class="linenos" data-linenos="8 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CodEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NomEmp</span><span class="p">,</span><span class="w"> </span><span class="k">COALESCE</span><span class="p">(</span><span class="n">ExTelEmp</span><span class="p">,</span><span class="w"> </span><span class="n">NumHi</span><span class="p">,</span><span class="w"> </span><span class="ss">&quot;0000&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">empleado</span><span class="p">;</span>
<span class="linenos" data-linenos="9 "></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CodHab</span><span class="p">,</span><span class="w"> </span><span class="n">DesHab</span><span class="p">,</span><span class="w"> </span><span class="k">CHAR_LENGTH</span><span class="p">(</span><span class="n">DesHab</span><span class="p">)</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">habilidad</span><span class="w"> </span><span class="k">WHERE</span><span class="w"> </span><span class="n">CodHab</span><span class="w"> </span><span class="k">LIKE</span><span class="w"> </span><span class="s1">&#39;A%&#39;</span><span class="p">;</span>
</code></pre>
              </div>
            </li>
          </ul>
          <p><a name="AR608"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="M13 3c3.88 0 7 3.14 7 7 0 2.8-1.63 5.19-4 6.31V21H9v-3H8c-1.11 0-2-.89-2-2v-3H4.5c-.42 0-.66-.5-.42-.81L6 9.66A7.003 7.003 0 0 1 13 3m-2.68 4.39h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91-.2.26-.31.68-.31 1.18h2c0-.31.04-.56.13-.74.09-.19.26-.36.51-.52.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82-.53-.45-1.26-.68-2.19-.68-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77zM12 14h2v-2h-2zm1-13C8.41 1 4.61 4.42 4.06 8.9L2.5 11h-.03l-.02.03c-.55.76-.62 1.76-.19 2.59.36.69 1 1.17 1.74 1.32V16c0 1.85 1.28 3.42 3 3.87V23h11v-5.5c2.5-1.67 4-4.44 4-7.5 0-4.97-4.04-9-9-9" />
                </svg></span> <strong>AR608</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Realiza las
              consultas de la 20 a la 36 del apartado 1.1.3 de <em>Consultas sobre una tabla</em> de la base de datos de
              <em>Tienda de informática</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="AP609"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="m15.1 1.81-2.83 2.83c-.77.78-.77 2.05 0 2.83l1.41 1.41-4.55 4.55-2.82-2.83L4.89 12c-4.95 5-1.39 8.5-1.39 8.5S7 24 12 19.09l1.41-1.41-2.8-2.8 4.54-4.54 1.39 1.39c.78.77 2.05.77 2.83 0L22.2 8.9zm2.83 8.47L16.55 8.9l-1.44-1.44-1.4-1.4 1.41-1.41 4.23 4.23z" />
                </svg></span> <strong>AP609</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr> // 3p) Realiza las
              consultas de la 21 a la 36 del apartado 1.2.3 de <em>Consultas sobre una tabla</em> de la base de datos de
              <em>Gestión de empleados</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="AC610"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC610</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>
                // 3p) Sobre la base de datos <code>empresa</code>, y utilizando composiciones internas, realiza las
                siguientes consultas:</p>
              <ol>
                <li>Muestra para cada departamento, su nombre, presupuesto y el nombre del centro al que pertenece.</li>
                <li>Muestra para cada departamento, su nombre, presupuesto y el nombre del empleado que lo dirige.</li>
                <li>Muestra para cada departamento, su nombre, presupuesto, el nombre del centro al que pertenece y el
                  nombre del empleado que lo dirige.</li>
                <li>Muestra el nombre del departamento, el nombre del centro al que pertenece y el nombre del empleado
                  que lo dirige, de aquel departamento que tenga el presupuesto más alto.</li>
                <li>Listar los empleados del centro <code>Fábrica Zona Sur</code>.</li>
                <li>Listar el nombre del empleado y el nombre y fecha de nacimiento de su hijo/hija para aquellos
                  empleados con un único hijo. Ordenar por fecha de nacimiento de los hijos.</li>
                <li>
                  <p>Usando los operadores de conjuntos, recupera:</p>
                  <ol>
                    <li>el código de departamento para aquellos departamentos que tienen empleados.</li>
                    <li>el código de departamento para aquellos departamentos que no tienen empleados.</li>
                    <li>los empleados que no son directivos de ningún departamento (no aparecen en
                      <code>departamento.CodEmpDir</code>).</li>
                    <li>los empleados que no son directivos de ningún departamento ni de ningún centro</li>
                  </ol>
                </li>
                <li>
                  <p>Recupera los empleados que trabajan en <code>Oficinas Zona Sur</code> y que tienen hijos.</p>
                </li>
                <li>Recupera los departamentos que tienen empleados con la habilidad <code>Fontanería</code>.</li>
                <li>Recupera todos los departamentos que dependen de un departamento secundario.</li>
              </ol>
            </li>
          </ul>
          <p><a name="AC611"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M20.832 3.367 8.668.108a3.15 3.15 0 0 0-3.856 2.226L.943 16.777a3.15 3.15 0 0 0 2.226 3.856l12.163 3.259a3.15 3.15 0 0 0 3.855-2.226l3.87-14.443a3.15 3.15 0 0 0-2.226-3.856M6.332 2.741a1.574 1.574 0 0 1 1.928-1.113l12.163 3.26a1.574 1.574 0 0 1 1.113 1.927l-3.87 14.444a1.574 1.574 0 0 1-1.928 1.113l-12.163-3.26a1.574 1.574 0 0 1-1.113-1.927zm2.634 2.336a.787.787 0 1 0-.407 1.52l9.122 2.444a.787.787 0 1 0 .407-1.52zM6.985 9.434a.787.787 0 0 1 .963-.557l9.123 2.445a.787.787 0 0 1-.408 1.52l-9.122-2.444a.787.787 0 0 1-.556-.964m-.055 3.244a.787.787 0 0 0-.407 1.52l5.32 1.427a.787.787 0 0 0 .408-1.52z" />
                  </svg></span> <strong>AC611</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                // 3p) Sobre la base de datos <code>empresa</code>, y utilizando composiciones externas, realiza las
                siguientes consultas:</p>
              <ol>
                <li>Muestra un listado de todas las habilidades, y si tienen, el código del empleado y el nivel de su
                  habilidad.</li>
                <li>Muestra un listado de las habilidades que no tiene ningún empleado.</li>
                <li>Comprueba si los empleados que no tienen hijos (<code>empleado.NumHi</code>) coinciden con los
                  empleados no tienen hijos relacionados (tabla <code>hijo</code>).</li>
                <li>Obtén el nombre del empleado y el nombre del hijo, si tuviese, para todos los empleados.</li>
                <li>Mostrar un listado con todos los departamentos junto con los nombres de los departamentos de los
                  cuales dependen (propiedad <code>CodDepDep</code>) (en el caso que dependan de alguno).</li>
                <li>Devuelve un listado de los empleados que no son directivos (usando <em>joins</em>) de departamentos.
                </li>
                <li>Devuelve un listado de los empleados que no son directivos (usando <em>joins</em>) de ningún centro.
                </li>
                <li>Comprueba si tenemos centros que no tengan ningún departamento asignado.</li>
                <li>Devuelve un listado de los empleados que no son directivos de ningún tipo.</li>
              </ol>
            </li>
          </ul>
          <p><a name="AR612"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="M13 3c3.88 0 7 3.14 7 7 0 2.8-1.63 5.19-4 6.31V21H9v-3H8c-1.11 0-2-.89-2-2v-3H4.5c-.42 0-.66-.5-.42-.81L6 9.66A7.003 7.003 0 0 1 13 3m-2.68 4.39h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91-.2.26-.31.68-.31 1.18h2c0-.31.04-.56.13-.74.09-.19.26-.36.51-.52.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82-.53-.45-1.26-.68-2.19-.68-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77zM12 14h2v-2h-2zm1-13C8.41 1 4.61 4.42 4.06 8.9L2.5 11h-.03l-.02.03c-.55.76-.62 1.76-.19 2.59.36.69 1 1.17 1.74 1.32V16c0 1.85 1.28 3.42 3 3.87V23h11v-5.5c2.5-1.67 4-4.44 4-7.5 0-4.97-4.04-9-9-9" />
                </svg></span> <strong>AR612</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
              <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
              // 3p) Realiza todas las consultas de los apartados 1.1.4 y 1.1.5 de <em>Consultas multitabla (interna y
                externa)</em> de la base de datos de <em>Tienda de informática</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="AP613"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="m15.1 1.81-2.83 2.83c-.77.78-.77 2.05 0 2.83l1.41 1.41-4.55 4.55-2.82-2.83L4.89 12c-4.95 5-1.39 8.5-1.39 8.5S7 24 12 19.09l1.41-1.41-2.8-2.8 4.54-4.54 1.39 1.39c.78.77 2.05.77 2.83 0L22.2 8.9zm2.83 8.47L16.55 8.9l-1.44-1.44-1.4-1.4 1.41-1.41 4.23 4.23z" />
                </svg></span> <strong>AP613</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
              <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
              // 3p) Realiza todas las consultas de los apartados 1.2.4 y 1.2.5 de <em>Consultas multitabla (interna y
                externa)</em> de la base de datos de <em>Gestión de empleados</em>, que podemos encontrar en las <a
                href="https://josejuansanchez.org/bd/ejercicios-consultas-sql/index.html">actividades propuestas</a> en
              los apuntes del docente <em>José Juan Sánchez</em>. Puedes comprobarlas en <a
                href="https://sql-playground.com/">https://sql-playground.com/</a>.</li>
          </ul>
          <p><a name="PR614"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M5.563 1.396a.95.95 0 0 0-.534.184c-.404.307-.501.9-.425 1.654.075.755.335 1.704.751 2.8.357.937.835 1.984 1.407 3.095-1.17.146-2.24.338-3.158.57-1.08.274-1.958.6-2.583.973C.397 11.045 0 11.484 0 12s.397.955 1.021 1.328c.55.33 1.308.618 2.217.87a1 1 0 0 0-.006.097c0 .485.365.887.82.887.368 0 .678-.26.784-.616q.89.171 1.898.297a31 31 0 0 0-1.408 3.067c-.421 1.093-.686 2.04-.765 2.795-.08.754.016 1.347.42 1.656.201.154.46.208.734.181s.572-.125.896-.287c.649-.323 1.407-.894 2.244-1.67.962-.89 2.026-2.058 3.118-3.421 1.086 1.37 2.146 2.543 3.103 3.439.834.78 1.588 1.355 2.235 1.682.323.163.62.265.894.293s.534-.025.736-.178c.405-.307.502-.9.426-1.654-.054-.54-.206-1.18-.437-1.9a.91.91 0 0 0 .343-.72.92.92 0 0 0-.238-.625.8.8 0 0 0-.701-.251c-.312-.75-.69-1.557-1.125-2.4a27 27 0 0 0 3.187-.575c1.08-.273 1.958-.597 2.583-.97.624-.374 1.021-.813 1.021-1.329s-.397-.957-1.021-1.33c-.625-.373-1.503-.696-2.583-.969a27 27 0 0 0-3.156-.568 31 31 0 0 0 1.406-3.063c.422-1.093.687-2.04.766-2.795.08-.754-.017-1.347-.42-1.656a.95.95 0 0 0-.531-.185 1.3 1.3 0 0 0-.203.004c-.274.026-.57.127-.895.289-.51.254-1.092.665-1.722 1.205a.8.8 0 0 0-.418-.123c-.456 0-.82.4-.82.886q0 .178.06.334a35 35 0 0 0-2.465 2.791c-1.086-1.37-2.146-2.543-3.103-3.439-.834-.78-1.588-1.355-2.235-1.682-.323-.163-.62-.265-.894-.293a1.3 1.3 0 0 0-.204-.006zm.021.385a1 1 0 0 1 .143.004c.205.02.462.105.757.254.592.298 1.33.855 2.147 1.62.955.893 2.022 2.077 3.119 3.466-.428.544-.859 1.12-1.29 1.72a42 42 0 0 0-3.29.235 31 31 0 0 1-1.453-3.184c-.409-1.075-.658-2.002-.729-2.7-.07-.7.05-1.136.276-1.307a.55.55 0 0 1 .32-.108m12.854.033a.55.55 0 0 1 .32.108c.225.172.343.61.27 1.308s-.33 1.624-.743 2.698a31 31 0 0 1-1.455 3.15 42 42 0 0 0-3.312-.234 49 49 0 0 0-1.274-1.717 35 35 0 0 1 2.436-2.772.78.78 0 0 0 .543.223c.456 0 .82-.401.82-.887a.94.94 0 0 0-.133-.484c.61-.519 1.163-.909 1.625-1.139.297-.147.555-.23.76-.25a1 1 0 0 1 .142-.004zm-6.442 5.622c.344.443.69.913 1.035 1.394q-.51-.012-1.031-.014-.532.001-1.05.014c.35-.481.699-.95 1.046-1.394M12 9.203q.668.001 1.314.02.398.563.793 1.154c.366.55.71 1.093 1.041 1.633a54 54 0 0 1-1.046 1.623q-.395.584-.791 1.138-.646.02-1.311.022-.684-.001-1.348-.022a53 53 0 0 1-.789-1.148 52 52 0 0 1-1.04-1.633 53 53 0 0 1 1.84-2.765q.658-.02 1.337-.022m-1.824.04q-.315.444-.625.905c-.334.496-.647.988-.953 1.477a47 47 0 0 1-1.239-2.178 41 41 0 0 1 2.817-.205zm3.625 0a41 41 0 0 1 2.838.202 47 47 0 0 1-1.264 2.198 53 53 0 0 0-1.574-2.4m3.248.251c1.213.146 2.317.34 3.252.576 1.057.268 1.907.587 2.478.928s.834.689.834.998-.263.655-.834.996c-.57.342-1.421.662-2.478.93-.943.239-2.056.433-3.281.58a47 47 0 0 0-1.416-2.492 47 47 0 0 0 1.445-2.516M6.95 9.496c.424.805.899 1.64 1.418 2.494a47 47 0 0 0-1.443 2.508 30 30 0 0 1-2.059-.318.9.9 0 0 0-.23-.508.8.8 0 0 0-.584-.262.8.8 0 0 0-.696.418c-.894-.247-1.63-.53-2.136-.832C.65 12.655.387 12.31.387 12s.263-.654.834-.996c.57-.342 1.421-.662 2.478-.93.935-.237 2.039-.431 3.252-.578zm4.34.8c-.576 0-1.041.5-1.041 1.112 0 .484.29.897.695 1.049v.063c0 .612.466 1.109 1.041 1.109.576 0 1.041-.497 1.041-1.11q0-.025-.002-.05c.424-.141.73-.565.73-1.063 0-.294-.107-.575-.302-.783a1.01 1.01 0 0 0-.738-.326 1 1 0 0 0-.711.3 1 1 0 0 0-.713-.3zm-2.695 2.061a51 51 0 0 0 1.572 2.397c-.99-.04-1.941-.108-2.832-.205q.573-1.067 1.26-2.192m6.779.02c.448.743.862 1.472 1.236 2.176a42 42 0 0 1-2.814.199q.313-.443.625-.902c.333-.495.647-.986.953-1.473m-8.23 2.537c1.033.117 2.141.198 3.304.236.427.6.854 1.179 1.278 1.723-1.103 1.382-2.176 2.561-3.135 3.45-.821.76-1.562 1.31-2.155 1.605-.296.147-.554.23-.76.25s-.35-.018-.462-.104c-.225-.172-.343-.61-.27-1.308s.329-1.624.742-2.698c.366-.948.861-2.018 1.458-3.154m9.656.004c.459.884.854 1.727 1.178 2.504a.91.91 0 0 0-.348.724c0 .486.364.887.82.887a1 1 0 0 0 .123-.01c.218.686.36 1.293.408 1.782.07.698-.05 1.135-.275 1.306-.113.086-.258.124-.463.104s-.462-.105-.758-.254c-.59-.298-1.329-.855-2.146-1.62-.955-.893-2.023-2.077-3.12-3.466.43-.545.862-1.123 1.294-1.725a42 42 0 0 0 3.287-.232m-3.776.246a49 49 0 0 1-1.05 1.4 49 49 0 0 1-1.04-1.398 47 47 0 0 0 2.09-.002" />
                  </svg></span> <strong>PR614</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
                <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                // 10p) A partir de la base de datos <a
                  href="resources/06bd-retail.sql"><code>06bd-retail.sql</code></a>, tras importarla en
                <em>MariaDB</em>, se pide:</p>
              <ol>
                <li>Obtén el diagrama EER mediante <em>DBeaver</em> (si quieres, puedes probar a utilizar <em>MySQL
                    Workbench</em>).</li>
                <li>Define las claves ajenas en un script SQL y ejecútalo.</li>
                <li>Vuelve a cargar el diagrama EER y comprueba que aparecen las relaciones.</li>
                <li>Realiza las siguientes consultas:<ol>
                    <li>¿Cuántas categorías hay en total?</li>
                    <li>Recupera todos los posibles estados que puede tener un pedido (revisa la columna
                      <code>orders.order_status</code>).</li>
                    <li>Recupera el nombre y el primer apellido de los clientes que viven en <code>Caguas</code>.</li>
                    <li>¿Cuál es el producto más caro? ¿Y el más barato?</li>
                    <li>¿Cuántos pedidos han realizado clientes que viven en el <code>Bronx</code>?</li>
                    <li>¿Cuántos productos han pedido clientes que viven en el <code>Bronx</code> y su nombre empieza
                      por <code>M</code>?</li>
                    <li>Recupera el nombre, email y ciudad de los clientes que tengan pedidos pendientes de pago.</li>
                    <li>Recupera el nombre de los departamentos que tengan pedidos pendientes de pago.</li>
                    <li>Recupera el nombre de los departamentos que han vendido algún producto a un cliente que vive en
                      <code>Phoenix</code>.</li>
                    <li>Recupera todos los productos cuya categoría contenga la palabra <code>Golf</code>.</li>
                    <li>Para todos los elementos de pedido, comprueba si el valor del subtotal cuadra con el producto
                      del precio por su cantidad.</li>
                    <li>Recupera todos los clientes que no han hecho ningún pedido.</li>
                    <li>Recupera todas las categorías que no tienen productos (usando combinaciones externas)</li>
                  </ol>
                </li>
              </ol>
            </li>
          </ul>
          <p><a name="PY615"></a></p>
          <ul>
            <li>
              <p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                    <path
                      d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z" />
                  </svg></span> <strong>PY615</strong>. (<abbr
                  title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
                // <abbr title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
                <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
                <abbr
                  title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
                // 10p) A partir del modelo físico creado en la actividad <a href="05ddl.html#PY516">PY516</a> del <a
                  href="05ddl.html#reto-ii-creamos">Reto II - Creamos</a>, en esta actividad nos vamos a centrar en
                definir una serie de consultas para explotar nuestra base de datos.</p>
              <p>Para ello, se pide un informe que detalle:</p>
              <ul>
                <li>Definición de 10 consultas que extraigan información, las cuales deben utilizar combinaciones de
                  tablas (tanto internas como externas), filtrado, ordenación y cálculos sencillos.</li>
                <li>Resolución mediante SQL de cada una de las consultas.</li>
                <li>Resultados de su ejecución sobre el modelo físico.</li>
              </ul>
              <p>Se utilizará una rúbrica para su evaluación en base a la siguiente lista de cotejo:</p>
              <ul>
                <li>Limpieza y calidad de las consultas.</li>
                <li>Variedad de consultas, desde consultas sencilla a más complejas.</li>
                <li>Documentación de las consultas.</li>
                <li>El informe entregado no contiene faltas de ortografía.</li>
                <li>El informe entregado tiene un formato adecuado (portada, apartados, autores, etc...).</li>
                <li>El informe debe indicar cómo se han repartido las tareas y qué ha realizado cada alumno/a.</li>
              </ul>
            </li>
          </ul>
          <p><a name="AR616"></a></p>
          <ul>
            <li><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                  <path
                    d="M13 3c3.88 0 7 3.14 7 7 0 2.8-1.63 5.19-4 6.31V21H9v-3H8c-1.11 0-2-.89-2-2v-3H4.5c-.42 0-.66-.5-.42-.81L6 9.66A7.003 7.003 0 0 1 13 3m-2.68 4.39h1.93c.01-.3.1-.53.28-.69a1 1 0 0 1 .66-.23c.31 0 .57.1.75.28.18.19.26.45.26.75 0 .32-.07.59-.23.82-.14.23-.35.43-.61.59-.51.34-.86.64-1.05.91-.2.26-.31.68-.31 1.18h2c0-.31.04-.56.13-.74.09-.19.26-.36.51-.52.45-.24.82-.53 1.11-.93s.44-.81.44-1.31c0-.76-.27-1.37-.81-1.82-.53-.45-1.26-.68-2.19-.68-.87 0-1.57.2-2.11.59-.52.41-.78.98-.77 1.77zM12 14h2v-2h-2zm1-13C8.41 1 4.61 4.42 4.06 8.9L2.5 11h-.03l-.02.03c-.55.76-.62 1.76-.19 2.59.36.69 1 1.17 1.74 1.32V16c0 1.85 1.28 3.42 3 3.87V23h11v-5.5c2.5-1.67 4-4.44 4-7.5 0-4.97-4.04-9-9-9" />
                </svg></span> <strong>AR616</strong>. (<abbr
                title="Consulta la información almacenada en una base de datos empleando asistentes, herramientas gráficas y el lenguaje de manipulación de datos.">RABD.3</abbr>
              // <abbr title="Se han identificado las herramientas y sentencias para realizar consultas.">CE3a</abbr>,
              <abbr title="Se han realizado consultas simples sobre una tabla.">CE3b</abbr>, <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones internas.">CE3c</abbr>,
              <abbr
                title="Se han realizado consultas sobre el contenido de varias tablas mediante composiciones externas.">CE3d</abbr>
              // 3p) Una vez finalizada la unidad, responde todas las preguntas del cuestionario inicial, con al menos
              un par de líneas para cada una de las cuestiones.</li>
          </ul>
          <!--
https://mystery.knightlab.com/
-->

          <!--
Contenidos básicos:

Almacenamiento de la información:
− Ficheros (planos, indexados, acceso directo, entre otros).
− Bases de datos. Conceptos, usos y tipos según el modelo de datos, la
ubicación de la información.
− Sistemas gestores de base de datos: Funciones, componentes y tipos.
− Bases de datos centralizadas y bases de datos distribuidas. Técnicas de
fragmentación.
− Legislación sobre protección de datos.
− Big Data: introducción, análisis de datos, inteligencia de negocios.

Bases de datos relacionales:
− Modelo de datos.
− Terminología del modelo relacional.
− Tipos de datos.
− Claves primarias.
− Restricciones de validación.
− Índices. Características.
− El valor NULL.
− Claves ajenas.
− Vistas.
− Usuarios. Privilegios.
− Lenguaje de descripción de datos (DDL).
− Lenguaje de control de datos (DCL).

Realización de consultas:
− Proyección, selección y ordenación de registros.
− Operadores. Operadores de comparación. Operadores lógicos.
− Consultas de resumen.
− Agrupamiento de registros.
− Composiciones internas.
− Composiciones externas.
− Subconsultas
− Combinación de múltiples selecciones.
− Optimización de consultas.

Tratamiento de datos:
− Inserción, borrado y modificación de registros.
− Integridad referencial.
− Subconsultas y composiciones en órdenes de edición.
− Transacciones.
− Políticas de bloqueo. Concurrencia.

Programación de bases de datos:
− Introducción. Lenguaje de programación.
− Variables del sistema y variables de usuario.
− Funciones.
− Estructuras de control de flujo.
− Procedimientos almacenados. Funciones de usuario.
− Eventos y disparadores.
− Excepciones.
− Cursores.

Interpretación de Diagramas Entidad/Relación:
− El modelo E/R. Entidades y relaciones. Cardinalidades. Debilidad.
− El modelo E/R ampliado. Generalización y especialización. Agregación.
− Paso del diagrama E/R al modelo relacional.
− Restricciones semánticas del modelo relacional.
− Normalización de modelos relacionales.

Uso de bases de datos no relacionales:
− Características de las bases de datos no relacionales.
− Tipos de bases de datos no relacionales.
− Elementos de las bases de datos no relacionales.
− Sistemas gestores de bases de datos no relacionales.
− Herramientas de los sistemas gestores de bases de datos no relacionales
para la gestión de la información almacenada.


Las actividades profesionales asociadas a esta función se aplican en:
− La gestión de la información almacenada en bases de datos.
− El desarrollo de aplicaciones que acceden a bases de datos.

La formación del módulo contribuye a alcanzar los objetivos generales c), e), f), p) y t) del ciclo formativo y las competencias b), c), e), p) y t) del título.

-->
















          <form class="md-feedback" name="feedback" hidden>
            <fieldset>
              <legend class="md-feedback__title">
                <a href='https://ko-fi.com/T6T8GWT9N' title='Invítame a un café en ko-fi.com' target='_blank'><img
                    height='36' style='border:0px;height:36px;' src='https://storage.ko-fi.com/cdn/kofi2.png?v=3'
                    border='0' alt='Invítame a un café en ko-fi.com' /></a>
              </legend>
              <div class="md-feedback__inner">
                <div class="md-feedback__list">

                  <button class="md-feedback__icon md-icon" type="submit" title="Me encantan estos apuntes"
                    data-md-value="1">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path
                        d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81" />
                    </svg>
                  </button>

                  <button class="md-feedback__icon md-icon" type="submit" title="Los apuntes son mejorables"
                    data-md-value="0">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path
                        d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14" />
                    </svg>
                  </button>

                </div>
                <div class="md-feedback__note">

                  <div data-md-value="1" hidden>




                    Gracias por tu tiempo. Si quieres me puedes <a href='https://ko-fi.com/T6T8GWT9N'>invitar a un café
                      en ko-fi</a>.
                  </div>

                  <div data-md-value="0" hidden>




                    ¡Gracias por tu colaboración! Ayúdame a mejorar los apuntes enviándome un mail a <a
                      href="mailto:a.medrano@edu.gva.es">a.medrano@edu.gva.es</a> con tus comentarios.
                  </div>

                </div>
              </div>
            </fieldset>
          </form>




        </div>
      </article>
    </div>
  </main>
  <footer class="footer">
    <div class="container">
      <div class="footer__content">
        <p class="footer__text">Â© 2024-2026 Mayte Olmedilla - <a
            href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.es" class="footer__link">Licencia CC
            BY-NC-SA</a></p>
        <p class="footer__text"><a href="https://github.com/mayteoe/BBDD" class="footer__link">GitHub</a> | <a
            href="https://www.iesjuanbosco.es" class="footer__link">IES Juan Bosco</a> | <a
            href="mailto:molmedilla@iesjuanbosco.es" class="footer__link">molmedilla@iesjuanbosco.es</a></p>
        <p class="footer__text footer__text--small">Basado en el trabajo de Aitor Medrano</p>
      </div>
    </div>
  </footer>
</body>

</html>